<!DOCTYPE html>
<!-- saved from url=(0042)https://realpython.com/python-defaultdict/ -->
<html lang="en" class=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./深入探讨defaultdict和dict的区别_files/osd.js.下载"></script><script src="./深入探讨defaultdict和dict的区别_files/pubads_impl_rendering_2020030501.js.下载"></script><script type="text/javascript" src="./深入探讨defaultdict和dict的区别_files/identify"></script><script type="text/javascript" src="./深入探讨defaultdict和dict的区别_files/track"></script><script type="text/javascript" src="./深入探讨defaultdict和dict的区别_files/beacon"></script><script type="text/javascript" async="" src="./深入探讨defaultdict和dict的区别_files/client.js.下载"></script><script async="" src="https://connect.facebook.net/en_US/fbevents.js"></script><script type="text/javascript" async="" src="./深入探讨defaultdict和dict的区别_files/6214500.js.下载"></script><script type="text/javascript" async="" src="./深入探讨defaultdict和dict的区别_files/videoplayer.js.下载"></script><script type="text/javascript" async="" src="./深入探讨defaultdict和dict的区别_files/prebid.js.下载"></script>
<link href="https://files.realpython.com/" rel="preconnect">
<title>Using the Python defaultdict Type for Handling Missing Keys – Real Python</title>
<meta name="author" content="Real Python">
<meta name="description" content="In this step-by-step tutorial, you&#39;ll learn how the Python defaultdict type works and how to use it for handling missing keys when you&#39;re working with dictionaries. You&#39;ll also learn how to use a defaultdict to solve problems like grouping or counting the items in a sequence or collection.">
<meta name="keywords" content="">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="./深入探讨defaultdict和dict的区别_files/font.32be62914940.css">
<link rel="stylesheet" href="./深入探讨defaultdict和dict的区别_files/realpython.min.c9ae547e4b02.css">
<link rel="canonical" href="https://realpython.com/python-defaultdict/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://files.realpython.com/media/The-Python-defaultdict-Type_Watermarked.f6e14d903857.jpg">
<meta property="og:image" content="https://files.realpython.com/media/The-Python-defaultdict-Type_Watermarked.f6e14d903857.jpg">
<meta name="twitter:creator" content="@realpython">
<meta name="twitter:site" content="@realpython">
<meta property="og:title" content="Using the Python defaultdict Type for Handling Missing Keys – Real Python">
<meta property="og:type" content="article">
<meta property="og:url" content="https://realpython.com/python-defaultdict/">
<meta property="og:description" content="In this step-by-step tutorial, you&#39;ll learn how the Python defaultdict type works and how to use it for handling missing keys when you&#39;re working with dictionaries. You&#39;ll also learn how to use a defaultdict to solve problems like grouping or counting the items in a sequence or collection.">
<link href="https://realpython.com/static/favicon.68cbf4197b0c.png" rel="icon">
<link href="https://realpython.com/atom.xml" rel="alternate" title="Real Python" type="application/atom+xml">
<link rel="manifest" href="https://realpython.com/manifest.json">
<script async="" type="text/javascript" src="./深入探讨defaultdict和dict的区别_files/gpt.js.下载"></script><script async="" src="./深入探讨defaultdict和dict的区别_files/analytics.js.下载"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35184939-1', 'auto', {'allowLinker': true});
  
  
  ga('send', 'pageview');
  
</script>
<style type="text/css">#waldo-sticky-footer-wrapper {position: fixed; width: 100%; bottom: 0px; left: 0px; text-align: center; z-index: 9000;}#waldo-sticky-footer-wrapper > div {position: relative; display: inline-block}#waldo-sticky-footer-wrapper iframe, #waldo-sticky-footer-wrapper div {margin-left: auto;margin-right: auto;}.waldo-sticky-sidebar{position: fixed; top: 10px;z-index: 90}.waldo-sticky-css{position: sticky; top: 10px; z-index: 90}.waldo-overlay{position: fixed;height: 100%;width: 100%;top: 0;left: 0;z-index: 105;background: rgba(0,0,0,0.7);}#waldo-counter {position: absolute;bottom: 0;right: 0;color: #fff;font-size: 30px;padding: 15px;}.waldo-bfleft {position: fixed; left: 0; top: 10px;z-index:101;}.waldo-bfright {position: fixed; right: 0; top: 10px;z-index:101;}#waldo-tag-6038 {clear: both !important;}div[class^="app_gdpr-"] a {color: #41afbb !important; text-decoration: underline !important}#waldo-close-button {position: absolute; right: 0;top: -24px;}#waldo-close-button a {border: 1px solid rgba(0,0,0,.35);padding: 3px;font-size: 12px;color: #fff;font-weight: bold;background-color: #777;}</style><script type="text/javascript">googletag.cmd.push(function() {googletag.pubads().addEventListener('slotRenderEnded', function(event) {waldoAddCloseBtn(event);});googletag.pubads().enableSingleRequest();googletag.enableServices();gptAdSlots[4996] = googletag.defineSlot('/124067137/realpython728x90FS_1', [[728, 90], [300, 250], [320, 50]], 'waldo-tag-4996').defineSizeMapping(googletag.sizeMapping().addSize([1024, 0], [[728, 90], [300, 250]]).addSize([768, 0], [[300, 250], [320, 50]]).addSize([0, 0], [[300, 250], [320, 50]]).build()).addService(googletag.pubads());googletag.display('waldo-tag-4996');gptAdSlots[4998] = googletag.defineSlot('/124067137/realpython728x90FS_2', [[728, 90], [300, 250], [320, 50]], 'waldo-tag-4998').defineSizeMapping(googletag.sizeMapping().addSize([1024, 0], [[728, 90], [300, 250]]).addSize([768, 0], [[300, 250], [320, 50]]).addSize([0, 0], [[300, 250], [320, 50]]).build()).addService(googletag.pubads());googletag.display('waldo-tag-4998');gptAdSlots[5000] = googletag.defineSlot('/124067137/realpython728x90FS_3', [[728, 90], [300, 250], [320, 50]], 'waldo-tag-5000').defineSizeMapping(googletag.sizeMapping().addSize([1024, 0], [[728, 90], [300, 250]]).addSize([768, 0], [[300, 250], [320, 50]]).addSize([0, 0], [[300, 250], [320, 50]]).build()).addService(googletag.pubads());googletag.display('waldo-tag-5000');gptAdSlots[5002] = googletag.defineSlot('/124067137/realpython728x90FS_4', [[728, 90], [300, 250], [320, 50]], 'waldo-tag-5002').defineSizeMapping(googletag.sizeMapping().addSize([1024, 0], [[728, 90], [300, 250]]).addSize([768, 0], [[300, 250], [320, 50]]).addSize([0, 0], [[300, 250], [320, 50]]).build()).addService(googletag.pubads());googletag.display('waldo-tag-5002');gptAdSlots[5004] = googletag.defineSlot('/124067137/realpython728x90FS_5', [[728, 90], [300, 250], [320, 50]], 'waldo-tag-5004').defineSizeMapping(googletag.sizeMapping().addSize([1024, 0], [[728, 90], [300, 250]]).addSize([768, 0], [[300, 250], [320, 50]]).addSize([0, 0], [[300, 250], [320, 50]]).build()).addService(googletag.pubads());googletag.display('waldo-tag-5004');gptAdSlots[5257] = googletag.defineSlot('/124067137/realpython728x90FS_6', [[728, 90], [300, 250], [320, 50]], 'waldo-tag-5257').defineSizeMapping(googletag.sizeMapping().addSize([1024, 0], [[728, 90], [300, 250]]).addSize([768, 0], [[300, 250], [320, 50]]).addSize([0, 0], [[300, 250], [320, 50]]).build()).addService(googletag.pubads());googletag.display('waldo-tag-5257');gptAdSlots[5259] = googletag.defineSlot('/124067137/realpython728x90FS_7', [[728, 90], [300, 250], [320, 50]], 'waldo-tag-5259').defineSizeMapping(googletag.sizeMapping().addSize([1024, 0], [[728, 90], [300, 250]]).addSize([768, 0], [[300, 250], [320, 50]]).addSize([0, 0], [[300, 250], [320, 50]]).build()).addService(googletag.pubads());googletag.display('waldo-tag-5259');});</script><link rel="preload" href="./深入探讨defaultdict和dict的区别_files/f(4).txt" as="script"><script type="text/javascript" src="./深入探讨defaultdict和dict的区别_files/f(4).txt"></script><script src="./深入探讨defaultdict和dict的区别_files/pubads_impl_2020030501.js.下载" async=""></script><script src="./深入探讨defaultdict和dict的区别_files/OneSignalPageSDKES6.js.下载" async=""></script><style type="text/css">
  /* === Form-Specific Styles === */
  /* stylelint-disable */

  #drip-106703 {
  }

  #drip-106703 .drip-header {
    background-color: #43ac6a !important;
  }

  #drip-106703 .drip-content h3 {
    color: #43ac6a !important;
    font-size: 29px !important;
  }

  #drip-106703 .drip-submit-button {
    background-color: #43ac6a !important;
    font-size: 19px !important;
  }

  #drip-106703 .drip-submit-button:hover {
    background-color: #40a365 !important;
  }

  #drip-106703 .drip-submit-button:active {
    background-color: #3c9b5f !important;
  }

  #drip-106703 dl dt,
  #drip-106703 .drip-content .drip-description,
  #drip-106703 .drip-errors {
    font-size: 18px !important;
  }

  #drip-106703 .drip-text-field {
    font-size: 18px !important;
  }

  /* === Reset styles === */

  .drip-tab h1,
  .drip-tab h2,
  .drip-tab h3,
  .drip-tab div,
  .drip-tab dl,
  .drip-tab dt,
  .drip-tab dd,
  .drip-tab p,
  .drip-tab a,
  .drip-tab .drip-text-field,
  .drip-tab .drip-text-field:focus,
  .drip-tab .drip-submit-button {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    float: none;
    width: auto;
    background-image: none;
    letter-spacing: 0;
    -webkit-box-shadow: none;
       -moz-box-shadow: none;
            box-shadow: none;
    -webkit-text-shadow: none !important;
       -moz-text-shadow: none !important;
            text-shadow: none !important;
  }

  .drip-tab a {
    text-decoration: none;
    color: #43ac6a !important;
  }

  .drip-tab :focus {
    outline: 0;
  }

  /* === Clearfix === */

  .drip-clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
  }
  * html .drip-clearfix             { zoom: 1; } /* IE6 */
  *:first-child+html .drip-clearfix { zoom: 1; } /* IE7 */

  /* === Main Container === */

  .drip-tab-container * {
    box-sizing: content-box;
  }

  /* === Content === */

  .drip-tab .drip-content {
    margin: 0;
    padding: 0;
    width: 380px;
    position: fixed;
    font-size: 100%;
    font: inherit;
    z-index: 10000;
    color: #333;
    vertical-align: baseline;
    text-align: left;
    background-color: #ffffff;
    -webkit-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
       -moz-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
            box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
  }

  .drip-tab.bottom .drip-content {
    bottom: -800px;
    -webkit-border-radius: 8px 8px 0 0;
       -moz-border-radius: 8px 8px 0 0;
            border-radius: 8px 8px 0 0;
    -webkit-transition: bottom 200ms ease-in;
       -moz-transition: bottom 200ms ease-in;
         -o-transition: bottom 200ms ease-in;
            transition: bottom 200ms ease-in;
  }

  .drip-tab.bottom.left .drip-content {
    left: 40px;
  }

  .drip-tab.bottom.right .drip-content {
    right: 40px;
  }

  .drip-tab.side-image .drip-content {
    width: 650px;
  }

  .drip-tab.side .drip-content {
    top: 10%;
  }

  .drip-tab.side.right .drip-content {
    right: -675px;
    -webkit-border-radius: 8px 0 0 8px;
       -moz-border-radius: 8px 0 0 8px;
            border-radius: 8px 0 0 8px;
    -webkit-transition: right 200ms ease-in;
       -moz-transition: right 200ms ease-in;
         -o-transition: right 200ms ease-in;
            transition: right 200ms ease-in;
  }

  .drip-tab.side.left .drip-content {
    left: -675px;
    -webkit-border-radius: 0 8px 8px 0;
       -moz-border-radius: 0 8px 8px 0;
            border-radius: 0 8px 8px 0;
    -webkit-transition: left 200ms ease-in;
       -moz-transition: left 200ms ease-in;
         -o-transition: left 200ms ease-in;
            transition: left 200ms ease-in;
  }

  .drip-tab.mobile .drip-content {
    width: 100% !important;
    bottom: -800px;
    left: 0;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
    -webkit-transition: bottom 200ms ease-in;
       -moz-transition: bottom 200ms ease-in;
         -o-transition: bottom 200ms ease-in;
            transition: bottom 200ms ease-in;
  }

  .drip-tab.drip-scrollable .drip-content {
    overflow-y: scroll;
  }

  /* === Header === */

  .drip-tab .drip-header {
    margin: 0;
    padding: 0;
    position: fixed;
    font-size: 100%;
    font: inherit;
    z-index: 10000;
    color: #333;
    vertical-align: baseline;
    text-align: left;
    -webkit-border-radius: 8px 8px 0 0;
       -moz-border-radius: 8px 8px 0 0;
            border-radius: 8px 8px 0 0;
    -webkit-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
       -moz-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
            box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
  }

  .drip-tab.bottom .drip-header {
    width: 380px;
    bottom: 0;
    -webkit-transition: bottom 200ms ease-in;
       -moz-transition: bottom 200ms ease-in;
         -o-transition: bottom 200ms ease-in;
            transition: bottom 200ms ease-in;
  }

  .drip-tab.bottom .drip-header.drip-hidden {
    bottom: -800px;
  }

  .drip-tab.bottom.left .drip-header {
    left: 40px;
  }

  .drip-tab.bottom.right .drip-header {
    right: 40px;
  }

  .drip-tab.bottom.image-left .drip-header,
  .drip-tab.bottom.image-right .drip-header {
    width: 510px;
  }

  .drip-tab.side .drip-header {
    width: 340px;
    top: 10%;
  }

  .drip-tab.side.right .drip-header {
    right: -100px;
    -webkit-transition: right 400ms ease-in;
       -moz-transition: right 400ms ease-in;
         -o-transition: right 400ms ease-in;
            transition: right 400ms ease-in;
    -webkit-transform: rotate(-90deg) !important;
       -moz-transform: rotate(-90deg) !important;
        -ms-transform: rotate(-90deg) !important;
         -o-transform: rotate(-90deg) !important;
            transform: rotate(-90deg) !important;
    -webkit-transform-origin: right center;
       -moz-transform-origin: right center;
         -o-transform-origin: right center;
            transform-origin: right center;
  }

  .drip-tab.side.right .drip-header.drip-hidden {
    right: -100px;
  }

  .drip-tab.side.left .drip-header {
    left: -100px;
    -webkit-transition: left 400ms ease-in;
       -moz-transition: left 400ms ease-in;
         -o-transition: left 400ms ease-in;
            transition: left 400ms ease-in;
    -webkit-transform: rotate(90deg) !important;
       -moz-transform: rotate(90deg) !important;
        -ms-transform: rotate(90deg) !important;
         -o-transform: rotate(90deg) !important;
            transform: rotate(90deg) !important;
    -webkit-transform-origin: left center;
       -moz-transform-origin: left center;
         -o-transform-origin: left center;
            transform-origin: left center;
  }

  .drip-tab.side.left .drip-header.drip-hidden {
    left: -100px;
  }

  .drip-tab.mobile .drip-header {
    width: 100% !important;
    bottom: 0;
    left: 0;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
    -webkit-transition: bottom 200ms ease-in;
       -moz-transition: bottom 200ms ease-in;
         -o-transition: bottom 200ms ease-in;
            transition: bottom 200ms ease-in;
  }

  .drip-tab.mobile .drip-header.drip-hidden {
    bottom: -300px;
  }

  /* === Header Toggle === */

  .drip-tab .drip-toggle {
    display: block;
    text-decoration: none;
    padding: 10px 50px 10px 25px; /* extra padding for the arrow */
  }

  /* === Teaser === */

  .drip-tab .drip-header h2 {
    display: block;
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;
    font-size: 16px !important;
    line-height: 1.5 !important;
    font-weight: bold !important;
    text-align: left !important;
    color: #fff !important;
    clear: none !important;
    letter-spacing: 0 !important;
    width: auto !important;
  }

  /* === Arrows === */

  .drip-tab .drip-header span.drip-arrow {
    display: block;
    position: absolute;
    margin: 0;
    padding: 0;
    width: 0;
    height: 0;
    line-height: 0;
    top: 20px;
    right: 32px;
  }

  /* === Panel === */

  .drip-tab .drip-content > div.drip-panel {
    padding: 25px;
    background-color: #fff;
    -webkit-border-radius: 6px;
       -moz-border-radius: 6px;
            border-radius: 6px;
  }

  .drip-tab.bottom .drip-content > div.drip-panel {
    -webkit-border-radius: 6px 6px 0 0;
       -moz-border-radius: 6px 6px 0 0;
            border-radius: 6px 6px 0 0;
  }

  .drip-tab.side.left .drip-content > div.drip-panel {
    -webkit-border-radius: 0 6px 6px 0;
       -moz-border-radius: 0 6px 6px 0;
            border-radius: 0 6px 6px 0;
  }

  .drip-tab.side.right .drip-content > div.drip-panel  {
    -webkit-border-radius: 6px 0 0 6px;
       -moz-border-radius: 6px 0 0 6px;
            border-radius: 6px 0 0 6px;
  }

  /* === Powered By === */

  .drip-tab .drip-powered-by {
    padding: 8px;
    text-align: left;
    font-weight: normal;
    font-size: 10px;
    line-height: 16px;
    color: #A8ACB9;
    text-align: right;
    margin-right: 25px;
    text-transform: uppercase;
    display: -webkit-box;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }

  .drip-tab .drip-powered-by a {
    color: #A8ACB9 !important;
    text-decoration: underline !important;
    margin-left: 6px;
  }

  /* === Content Sections === */

  .drip-tab.side-image .drip-form-aside {
    width: 245px;
    text-align: center;
  }

  .drip-tab.image-left .drip-form-main {
    margin-left: 270px;
  }

  .drip-tab.image-right .drip-form-main {
    margin-right: 270px;
  }

  .drip-tab.image-left .drip-form-aside {
    float: left;
  }

  .drip-tab.image-right .drip-form-aside {
    float: right;
  }

  @media screen and (max-width: 650px) {
    .drip-tab.side-image .drip-content {
      width: 380px;
    }

    .drip-tab.side-image .drip-form-main {
      margin-left: 0;
      margin-right: 0;
    }

    .drip-tab.side-image .drip-form-aside {
      display: none;
    }
  }

  /* === Content Headings & Paragraphs === */

  .drip-tab .drip-content h3 {
    display: block;
    margin: 0 20px 0 0 !important;
    padding: 0 0 15px 0 !important;
    line-height: 1.4 !important;
    font-weight: bold !important;
    text-align: left !important;
    color: #4477bd !important;
    clear: none !important;
  }

  .drip-tab .drip-content .drip-description {
    margin: 0;
    padding: 0 0 20px 0;
    line-height: 1.4;
    text-align: left;
    color: #4F5362;
  }

  .drip-tab .drip-content .drip-post-submission {
    padding: 0;
  }

  .drip-tab .drip-content .drip-description a {
    text-decoration: underline;
  }

  .drip-tab .drip-content .drip-description em {
    font-style: italic;
  }

  .drip-tab .drip-content .drip-description ul,
  .drip-tab .drip-content .drip-description ol {
    list-style-position: outside;
    margin: 8px 0 8px 30px;
  }

  .drip-tab .drip-content .drip-description ul li
  .drip-tab .drip-content .drip-description ol li {
    padding: 0;
  }

  .drip-tab .drip-content .drip-image-center-helper {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
  }

  .drip-tab .drip-content img.drip-image {
    max-width: 245px;
    vertical-align: middle;
  }

  .drip-tab .drip-content a.drip-close {
    position: absolute;
    right: 25px;
    top: 25px;
  }

  .drip-tab .drip-content a.drip-close:hover {
    cursor: pointer;
  }

  /* === Content Subscribe Form === */

  .drip-tab form {
    margin: 0 !important;
    padding: 0 !important;
  }

  .drip-tab dl {
    display: block;
    margin: 0;
    padding: 0 0 5px 0;
  }

  .drip-tab dl dt {
    display: block;
    padding: 0 0 5px 0;
    font-weight: bold;
    color: #4F5362;
  }

  .drip-tab dl.no-labels dt {
    display: none;
  }

  .drip-tab dl dd {
    display: block;
    padding: 0 0 8px 0;
  }

  .drip-tab .drip-text-field {
    margin: 0 !important;
    padding: 10px 12px !important;
    height: auto !important;
    width: 100% !important;
    color: #4F5362 !important;
    background-color: #fff !important;
    border: 1px solid #A8ACB9 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    -webkit-box-sizing: border-box !important;
       -moz-box-sizing: border-box !important;
        -ms-box-sizing: border-box !important;
            box-sizing: border-box !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
  }

  .drip-tab .drip-text-field::-webkit-input-placeholder { /* WebKit browsers */
    color: #A8ACB9 !important;
  }
  .drip-tab .drip-text-field:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
    color: #A8ACB9 !important;
  }
  .drip-tab .drip-text-field::-moz-placeholder { /* Mozilla Firefox 19+ */
    color: #A8ACB9 !important;
  }
  .drip-tab .drip-text-field:-ms-input-placeholder { /* Internet Explorer 10+ */
    color: #A8ACB9 !important;
  }

  .drip-tab .drip-text-field:focus {
    border-color: #9398a9 !important;
    outline: 0;
    background-image: none;
    background-color: #fff !important;
  }

  .drip-tab.mobile .drip-text-field {
    font-size: 16px;
  }

  .drip-tab .drip-errors {
    padding: 5px 0 0 0;
    font-weight: normal;
    color: red;
  }

  .drip-tab .drip-submit-button {
    padding: 6px 26px !important;
    color: #ffffff !important;
    font-weight: bold !important;
    line-height: 1.6 !important;
    border: 0 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    cursor: pointer !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
    height: auto;
    transition: background 0.2s ease !important;
  }

  .drip-tab .drip-submit-button:hover {
    background-image: none !important;
  }

  .drip-tab .drip-submit-button:active {
    background-image: none !important;
  }

  /* checkbox */

  .drip-tab input,
  .drip-tab textarea {
    display: block;
    box-shadow: none;
    position: relative;
    border: 1px solid #cccccc;
    outline: none;
    border-radius: 3px;
    font: inherit;
    color: #262626;
    padding: 12px 18px;
    transition: border-color 300ms;
    width: 100%;
  }

  .drip-tab .zenput--checkbox.hidden {
    margin-bottom: -8px;
    display: none;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label {
    font: inherit;
    font-size: 16px;
    line-height: 30px;
    color: #262626;
    cursor: pointer;
    white-space: normal;
    word-break: normal;
    display: block;
    padding-left: 36px;
    position: relative;
    transition: color 300ms
  }

  .drip-tab .zenput--checkbox input[type="checkbox"]~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 24px;
    height: 24px;
    position: absolute;
    top: 3px;
    left: 0;
    border-radius: 3px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 3px;
    transition: background 300ms ease-out, border-color 300ms;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    opacity: 0;
    width: 16px;
    display: block;
    fill: #cccccc;
    transition: opacity 300ms ease-out;
  }

  .drip-tab .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label {
    color: #333 !important;
  }
  .drip-tab .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    background-color: #ffffff;
    border-color: #a8acb9;
  }
  .drip-tab .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    fill: #43ac6a !important;
    opacity: 1;
  }

  /* hover state */

  .drip-tab .zenput--checkbox input:not([disabled]):not(:checked) ~ .zenput__checkbox-label:hover {
    color: #262626;
  }

  .drip-tab .zenput--checkbox input:not([disabled]):not(:checked) ~ .zenput__checkbox-label:hover  .zenput__checkbox-label__icon {
    border-color: var(--gray-9);
  }

  .drip-tab .zenput--checkbox input:not([disabled]):not(:checked) ~ .zenput__checkbox-label:hover  .zenput__checkbox-label__icon svg {
    opacity: 1;
  }

  /* active state */

  .drip-tab .zenput--checkbox input:not([disabled]) ~ .zenput__checkbox-label:active {
    color: #f224f2;
  }

  /* focus state */

  .drip-tab .zenput--checkbox input:not([disabled]) ~ .zenput__checkbox-label:focus .zenput__checkbox-label__icon,
  .drip-tab .zenput--checkbox input:not([disabled]):focus ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    border-color: #262626;
  }

  /* stylelint-enable */

</style><style type="text/css">
  /* === Form-Specific Styles === */
  /* stylelint-disable */

  #drip-108609 {
    background: #fff !important;
  }

  #drip-108609 .drip-content h3 {
    color: #f9a82f !important;
    font-size: 28px !important;
  }

  #drip-108609 .drip-submit-button {
    background-color: #f9a82f !important;
    font-size: 19px !important;
  }

  #drip-108609 .drip-submit-button:hover {
    background-color: #eda02d !important;
  }

  #drip-108609 .drip-submit-button:active {
    background-color: #e0972a !important;
  }

  #drip-108609 dl dt,
  #drip-108609 .drip-content .drip-description,
  #drip-108609 .drip-errors {
    font-size: 16px !important;
  }

  #drip-108609 .drip-text-field {
    font-size: 16px !important;
  }

  /* === Reset styles === */

  .drip-lightbox h1,
  .drip-lightbox h2,
  .drip-lightbox h3,
  .drip-lightbox div,
  .drip-lightbox dl,
  .drip-lightbox dt,
  .drip-lightbox dd,
  .drip-lightbox p,
  .drip-lightbox a,
  .drip-lightbox .drip-text-field,
  .drip-lightbox .drip-text-field:focus,
  .drip-lightbox .drip-submit-button {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    float: none;
    width: auto;
    background-image: none;
    letter-spacing: 0;
    -webkit-box-shadow: none;
       -moz-box-shadow: none;
            box-shadow: none;
    -webkit-text-shadow: none !important;
       -moz-text-shadow: none !important;
            text-shadow: none !important;
  }

  .drip-lightbox a {
    text-decoration: none;
    color: #f9a82f !important;
  }

  .drip-lightbox :focus {
    outline: 0;
  }

  .drip-lightbox input::-webkit-input-placeholder { /* WebKit browsers */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input::-moz-placeholder { /* Mozilla Firefox 19+ */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input:-ms-input-placeholder { /* Internet Explorer 10+ */
    color: #A8ACB9 !important;
  }

  /* === Clearfix === */

  .drip-clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
  }
  * html .drip-clearfix             { zoom: 1; } /* IE6 */
  *:first-child+html .drip-clearfix { zoom: 1; } /* IE7 */

  /* === Backdrop === */

  .drip-backdrop {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 10000;
    background-color: #000;
    opacity: 0;
    -webkit-transition: opacity .3s linear;
       -moz-transition: opacity .3s linear;
         -o-transition: opacity .3s linear;
            transition: opacity .3s linear;
  }

  .drip-backdrop.drip-in {
    opacity: 0.2;
  }

  .drip-backdrop.drip-hidden {
    display: none;
  }

  /* === Main Container === */

  .drip-lightbox-wrapper * {
    box-sizing: content-box;
  }

  /* === Content === */

  .drip-lightbox .drip-content {
    margin: 0 0 0 -190px;
    padding: 0;
    position: fixed;
    width: 380px;
    top: -25%;
    left: 50%;
    font-size: 100%;
    z-index: 11000;
    color: #333;
    vertical-align: baseline;
    background-color: #ffffff;
    opacity: 0;
    -webkit-border-radius: 8px;
       -moz-border-radius: 8px;
            border-radius: 8px;
    -webkit-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
       -moz-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
            box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
    -webkit-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;
       -moz-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
         -o-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
            transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
  }

  .drip-lightbox.drip-in .drip-content {
    top: 15%;
    opacity: 1;
  }

  .drip-lightbox.drip-hidden .drip-content {
    display: none;
  }

  .drip-lightbox.side-image .drip-content {
    margin-left: -325px;
    width: 650px;
  }

  .drip-lightbox.mobile .drip-content {
    margin: 0;
    width: 100%;
    left: 0;
    top: auto;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
  }

  .drip-lightbox.mobile.drip-in .drip-content {
    top: auto;
    bottom: 0;
  }

  .drip-lightbox.drip-scrollable .drip-content {
    overflow-y: scroll;
  }

  /* === Teaser === */

  .drip-lightbox .drip-header h2 {
    display: block;
    margin: 0 !important;
    padding: 12px 0 !important;
    font-size: 14px !important;
    line-height: 13px !important;
    font-weight: bold !important;
    color: #fff !important;
    letter-spacing: 0 !important;
  }

  /* === Panel === */

  .drip-lightbox .drip-content > div.drip-panel {
    padding: 25px;
    background-color: #fff;
    -webkit-border-radius: 6px;
       -moz-border-radius: 6px;
            border-radius: 6px;
  }

  /* === Powered By === */

  .drip-lightbox .drip-powered-by {
    padding: 8px;
    text-align: left;
    font-weight: normal;
    font-size: 10px;
    line-height: 16px;
    color: #A8ACB9;
    text-align: right;
    margin-right: 25px;
    text-transform: uppercase;
    display: -webkit-box;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }

  .drip-lightbox .drip-powered-by a {
    color: #A8ACB9 !important;
    text-decoration: underline !important;
    margin-left: 6px;
  }

  /* === Content Sections === */

  .drip-lightbox.side-image .drip-form-aside {
    width: 245px;
    text-align: center;
  }

  .drip-lightbox.image-left .drip-form-main {
    margin-left: 270px;
  }

  .drip-lightbox.image-right .drip-form-main {
    margin-right: 270px;
  }

  .drip-lightbox.image-left .drip-form-aside {
    float: left;
  }

  .drip-lightbox.image-right .drip-form-aside {
    float: right;
  }

  @media screen and (max-width: 650px) {
    /* prevent overriding mobile class styles */
    .drip-lightbox.side-image:not(.mobile) .drip-content {
      margin-left: -190px;
      width: 380px;
    }

    .drip-lightbox.side-image .drip-form-main {
      margin-left: 0;
      margin-right: 0;
    }

    .drip-lightbox.side-image .drip-form-aside {
      display: none;
    }
  }

  /* === Content Headings & Paragraphs === */

  .drip-lightbox .drip-content h3 {
    display: block;
    margin: 0 20px 0 0 !important;
    padding: 0 0 15px 0 !important;
    line-height: 1.4 !important;
    font-weight: bold !important;
    text-align: left !important;
    color: #4477bd !important;
    clear: none !important;
  }

  .drip-lightbox .drip-content .drip-description {
    margin: 0;
    padding: 0 0 20px 0;
    line-height: 1.6;
    text-align: left;
  }

  .drip-lightbox .drip-content .drip-post-submission {
    padding: 0;
  }

  .drip-lightbox .drip-content .drip-description a {
    text-decoration: underline;
  }

  .drip-lightbox .drip-content .drip-description em {
    font-style: italic;
  }

  .drip-lightbox .drip-content .drip-description ul,
  .drip-lightbox .drip-content .drip-description ol {
    list-style-position: outside;
    margin: 8px 0 8px 30px;
  }

  .drip-lightbox .drip-content .drip-description ul li
  .drip-lightbox .drip-content .drip-description ol li {
    padding: 0;
  }

  .drip-lightbox .drip-content img.drip-image {
    margin-bottom: 20px;
  }

  .drip-lightbox .drip-content .drip-image-center-helper {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
  }

  .drip-lightbox .drip-content img.drip-image {
    max-width: 245px;
    vertical-align: middle;
  }

  .drip-lightbox .drip-content a.drip-close {
    position: absolute;
    right: 25px;
    top: 25px;
  }

  .drip-lightbox .drip-content a.drip-close:hover {
    cursor: pointer;
  }

  /* === Content Subscribe Form === */

  .drip-lightbox form {
    margin: 0 !important;
    padding: 0 !important;
  }

  .drip-lightbox dl {
    display: block;
    margin: 0;
    padding: 0 0 5px 0;
  }

  .drip-lightbox dl dt {
    display: block;
    padding: 0 0 5px 0;
    /* font-size: 13px; */
    font-weight: bold;
  }

  .drip-lightbox dl.no-labels dt {
    display: none;
  }

  .drip-lightbox dl dd {
    display: block;
    padding: 0 0 8px 0;
  }

  .drip-lightbox .drip-text-field {
    margin: 0 !important;
    padding: 10px 12px !important;
    height: auto !important;
    width: 100% !important;
    color: #4F5362 !important;
    background-color: #fff !important;
    border: 1px solid #A8ACB9 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    -webkit-box-sizing: border-box !important;
       -moz-box-sizing: border-box !important;
        -ms-box-sizing: border-box !important;
            box-sizing: border-box !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
  }

  .drip-lightbox .drip-text-field:focus {
    border-color: #9398a9 !important;
    outline: 0;
    background-image: none;
    background-color: #fff !important;
  }

  .drip-lightbox.mobile .drip-text-field {
    font-size: 16px;
  }

  .drip-lightbox .drip-errors {
    padding: 5px 0 0 0;
    font-weight: normal;
    color: red;
  }

  .drip-lightbox .drip-submit-button {
    padding: 6px 26px !important;
    color: #ffffff !important;
    font-weight: bold !important;
    line-height: 1.6 !important;
    border: 0 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    cursor: pointer !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
    height: auto;
    transition: background 0.2s ease !important;
    -webkit-box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
       -moz-box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
            box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
  }

  .drip-lightbox .drip-submit-button:hover {
    background-image: none !important;
  }

  .drip-lightbox .drip-submit-button:active {
    background-image: none !important;
  }

  /* checkbox */

  .drip-lightbox input,
  .drip-lightbox textarea {
    display: block;
    box-shadow: none;
    position: relative;
    border: 1px solid #cccccc;
    outline: none;
    border-radius: 3px;
    font: inherit;
    color: #262626;
    padding: 12px 18px;
    transition: border-color 300ms;
    width: 100%;
  }

  .drip-lightbox .zenput--checkbox.hidden {
    margin-bottom: -8px;
    display: none;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label {
    font: inherit;
    font-size: 16px;
    line-height: 30px;
    color: #262626;
    cursor: pointer;
    white-space: normal;
    word-break: break-word;
    display: block;
    padding-left: 36px;
    position: relative;
    transition: color 300ms
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 24px;
    height: 24px;
    position: absolute;
    top: 3px;
    left: 0;
    border-radius: 3px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 3px;
    transition: background 300ms ease-out, border-color 300ms;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    opacity: 0;
    width: 16px;
    display: block;
    fill: #cccccc;
    transition: opacity 300ms ease-out;
  }

  .drip-lightbox .zenput--checkbox .zenput__checkbox-label .zenput__checkbox-label__icon .octicon-dash {
    display: none;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label {
    color: #333 !important;
  }
  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    background-color: #ffffff;
    border-color: #a8acb9;
  }
  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    fill: #f9a82f !important;
    opacity: 1;
  }
  /* stylelint-enable */

</style><style type="text/css">
  /* === Form-Specific Styles === */
  /* stylelint-disable */

  #drip-108599 {
    background: #fff !important;
  }

  #drip-108599 .drip-content h3 {
    color: #f9a82f !important;
    font-size: 28px !important;
  }

  #drip-108599 .drip-submit-button {
    background-color: #f9a82f !important;
    font-size: 19px !important;
  }

  #drip-108599 .drip-submit-button:hover {
    background-color: #eda02d !important;
  }

  #drip-108599 .drip-submit-button:active {
    background-color: #e0972a !important;
  }

  #drip-108599 dl dt,
  #drip-108599 .drip-content .drip-description,
  #drip-108599 .drip-errors {
    font-size: 16px !important;
  }

  #drip-108599 .drip-text-field {
    font-size: 16px !important;
  }

  /* === Reset styles === */

  .drip-lightbox h1,
  .drip-lightbox h2,
  .drip-lightbox h3,
  .drip-lightbox div,
  .drip-lightbox dl,
  .drip-lightbox dt,
  .drip-lightbox dd,
  .drip-lightbox p,
  .drip-lightbox a,
  .drip-lightbox .drip-text-field,
  .drip-lightbox .drip-text-field:focus,
  .drip-lightbox .drip-submit-button {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    float: none;
    width: auto;
    background-image: none;
    letter-spacing: 0;
    -webkit-box-shadow: none;
       -moz-box-shadow: none;
            box-shadow: none;
    -webkit-text-shadow: none !important;
       -moz-text-shadow: none !important;
            text-shadow: none !important;
  }

  .drip-lightbox a {
    text-decoration: none;
    color: #f9a82f !important;
  }

  .drip-lightbox :focus {
    outline: 0;
  }

  .drip-lightbox input::-webkit-input-placeholder { /* WebKit browsers */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input::-moz-placeholder { /* Mozilla Firefox 19+ */
    color: #A8ACB9 !important;
  }
  .drip-lightbox input:-ms-input-placeholder { /* Internet Explorer 10+ */
    color: #A8ACB9 !important;
  }

  /* === Clearfix === */

  .drip-clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
  }
  * html .drip-clearfix             { zoom: 1; } /* IE6 */
  *:first-child+html .drip-clearfix { zoom: 1; } /* IE7 */

  /* === Backdrop === */

  .drip-backdrop {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 10000;
    background-color: #000;
    opacity: 0;
    -webkit-transition: opacity .3s linear;
       -moz-transition: opacity .3s linear;
         -o-transition: opacity .3s linear;
            transition: opacity .3s linear;
  }

  .drip-backdrop.drip-in {
    opacity: 0.2;
  }

  .drip-backdrop.drip-hidden {
    display: none;
  }

  /* === Main Container === */

  .drip-lightbox-wrapper * {
    box-sizing: content-box;
  }

  /* === Content === */

  .drip-lightbox .drip-content {
    margin: 0 0 0 -190px;
    padding: 0;
    position: fixed;
    width: 380px;
    top: -25%;
    left: 50%;
    font-size: 100%;
    z-index: 11000;
    color: #333;
    vertical-align: baseline;
    background-color: #ffffff;
    opacity: 0;
    -webkit-border-radius: 8px;
       -moz-border-radius: 8px;
            border-radius: 8px;
    -webkit-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
       -moz-box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
            box-shadow: 0px 10px 28px rgba(0,0,0,0.36);
    -webkit-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;
       -moz-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
         -o-transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
            transition: opacity .3s linear, top .3s ease-out, bottom 200ms ease-in;;
  }

  .drip-lightbox.drip-in .drip-content {
    top: 15%;
    opacity: 1;
  }

  .drip-lightbox.drip-hidden .drip-content {
    display: none;
  }

  .drip-lightbox.side-image .drip-content {
    margin-left: -325px;
    width: 650px;
  }

  .drip-lightbox.mobile .drip-content {
    margin: 0;
    width: 100%;
    left: 0;
    top: auto;
    -webkit-border-radius: 0;
       -moz-border-radius: 0;
            border-radius: 0;
  }

  .drip-lightbox.mobile.drip-in .drip-content {
    top: auto;
    bottom: 0;
  }

  .drip-lightbox.drip-scrollable .drip-content {
    overflow-y: scroll;
  }

  /* === Teaser === */

  .drip-lightbox .drip-header h2 {
    display: block;
    margin: 0 !important;
    padding: 12px 0 !important;
    font-size: 14px !important;
    line-height: 13px !important;
    font-weight: bold !important;
    color: #fff !important;
    letter-spacing: 0 !important;
  }

  /* === Panel === */

  .drip-lightbox .drip-content > div.drip-panel {
    padding: 25px;
    background-color: #fff;
    -webkit-border-radius: 6px;
       -moz-border-radius: 6px;
            border-radius: 6px;
  }

  /* === Powered By === */

  .drip-lightbox .drip-powered-by {
    padding: 8px;
    text-align: left;
    font-weight: normal;
    font-size: 10px;
    line-height: 16px;
    color: #A8ACB9;
    text-align: right;
    margin-right: 25px;
    text-transform: uppercase;
    display: -webkit-box;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }

  .drip-lightbox .drip-powered-by a {
    color: #A8ACB9 !important;
    text-decoration: underline !important;
    margin-left: 6px;
  }

  /* === Content Sections === */

  .drip-lightbox.side-image .drip-form-aside {
    width: 245px;
    text-align: center;
  }

  .drip-lightbox.image-left .drip-form-main {
    margin-left: 270px;
  }

  .drip-lightbox.image-right .drip-form-main {
    margin-right: 270px;
  }

  .drip-lightbox.image-left .drip-form-aside {
    float: left;
  }

  .drip-lightbox.image-right .drip-form-aside {
    float: right;
  }

  @media screen and (max-width: 650px) {
    /* prevent overriding mobile class styles */
    .drip-lightbox.side-image:not(.mobile) .drip-content {
      margin-left: -190px;
      width: 380px;
    }

    .drip-lightbox.side-image .drip-form-main {
      margin-left: 0;
      margin-right: 0;
    }

    .drip-lightbox.side-image .drip-form-aside {
      display: none;
    }
  }

  /* === Content Headings & Paragraphs === */

  .drip-lightbox .drip-content h3 {
    display: block;
    margin: 0 20px 0 0 !important;
    padding: 0 0 15px 0 !important;
    line-height: 1.4 !important;
    font-weight: bold !important;
    text-align: left !important;
    color: #4477bd !important;
    clear: none !important;
  }

  .drip-lightbox .drip-content .drip-description {
    margin: 0;
    padding: 0 0 20px 0;
    line-height: 1.6;
    text-align: left;
  }

  .drip-lightbox .drip-content .drip-post-submission {
    padding: 0;
  }

  .drip-lightbox .drip-content .drip-description a {
    text-decoration: underline;
  }

  .drip-lightbox .drip-content .drip-description em {
    font-style: italic;
  }

  .drip-lightbox .drip-content .drip-description ul,
  .drip-lightbox .drip-content .drip-description ol {
    list-style-position: outside;
    margin: 8px 0 8px 30px;
  }

  .drip-lightbox .drip-content .drip-description ul li
  .drip-lightbox .drip-content .drip-description ol li {
    padding: 0;
  }

  .drip-lightbox .drip-content img.drip-image {
    margin-bottom: 20px;
  }

  .drip-lightbox .drip-content .drip-image-center-helper {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
  }

  .drip-lightbox .drip-content img.drip-image {
    max-width: 245px;
    vertical-align: middle;
  }

  .drip-lightbox .drip-content a.drip-close {
    position: absolute;
    right: 25px;
    top: 25px;
  }

  .drip-lightbox .drip-content a.drip-close:hover {
    cursor: pointer;
  }

  /* === Content Subscribe Form === */

  .drip-lightbox form {
    margin: 0 !important;
    padding: 0 !important;
  }

  .drip-lightbox dl {
    display: block;
    margin: 0;
    padding: 0 0 5px 0;
  }

  .drip-lightbox dl dt {
    display: block;
    padding: 0 0 5px 0;
    /* font-size: 13px; */
    font-weight: bold;
  }

  .drip-lightbox dl.no-labels dt {
    display: none;
  }

  .drip-lightbox dl dd {
    display: block;
    padding: 0 0 8px 0;
  }

  .drip-lightbox .drip-text-field {
    margin: 0 !important;
    padding: 10px 12px !important;
    height: auto !important;
    width: 100% !important;
    color: #4F5362 !important;
    background-color: #fff !important;
    border: 1px solid #A8ACB9 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    -webkit-box-sizing: border-box !important;
       -moz-box-sizing: border-box !important;
        -ms-box-sizing: border-box !important;
            box-sizing: border-box !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
  }

  .drip-lightbox .drip-text-field:focus {
    border-color: #9398a9 !important;
    outline: 0;
    background-image: none;
    background-color: #fff !important;
  }

  .drip-lightbox.mobile .drip-text-field {
    font-size: 16px;
  }

  .drip-lightbox .drip-errors {
    padding: 5px 0 0 0;
    font-weight: normal;
    color: red;
  }

  .drip-lightbox .drip-submit-button {
    padding: 6px 26px !important;
    color: #ffffff !important;
    font-weight: bold !important;
    line-height: 1.6 !important;
    border: 0 !important;
    -webkit-border-radius: 3px !important;
       -moz-border-radius: 3px !important;
            border-radius: 3px !important;
    cursor: pointer !important;
    background-image: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
    height: auto;
    transition: background 0.2s ease !important;
    -webkit-box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
       -moz-box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
            box-shadow: 0px 2px 4px rgba(0,0,0,0.20);
  }

  .drip-lightbox .drip-submit-button:hover {
    background-image: none !important;
  }

  .drip-lightbox .drip-submit-button:active {
    background-image: none !important;
  }

  /* checkbox */

  .drip-lightbox input,
  .drip-lightbox textarea {
    display: block;
    box-shadow: none;
    position: relative;
    border: 1px solid #cccccc;
    outline: none;
    border-radius: 3px;
    font: inherit;
    color: #262626;
    padding: 12px 18px;
    transition: border-color 300ms;
    width: 100%;
  }

  .drip-lightbox .zenput--checkbox.hidden {
    margin-bottom: -8px;
    display: none;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] {
    height: 0;
    width: 0;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label {
    font: inherit;
    font-size: 16px;
    line-height: 30px;
    color: #262626;
    cursor: pointer;
    white-space: normal;
    word-break: break-word;
    display: block;
    padding-left: 36px;
    position: relative;
    transition: color 300ms
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    content: "";
    display: block;
    background: #f5f5f5;
    width: 24px;
    height: 24px;
    position: absolute;
    top: 3px;
    left: 0;
    border-radius: 3px;
    border: 1px solid #cccccc;
    box-sizing: border-box;
    padding: 3px;
    transition: background 300ms ease-out, border-color 300ms;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"] ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    opacity: 0;
    width: 16px;
    display: block;
    fill: #cccccc;
    transition: opacity 300ms ease-out;
  }

  .drip-lightbox .zenput--checkbox .zenput__checkbox-label .zenput__checkbox-label__icon .octicon-dash {
    display: none;
  }

  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label {
    color: #333 !important;
  }
  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon {
    background-color: #ffffff;
    border-color: #a8acb9;
  }
  .drip-lightbox .zenput--checkbox input[type="checkbox"]:checked ~ .zenput__checkbox-label .zenput__checkbox-label__icon svg {
    fill: #f9a82f !important;
    opacity: 1;
  }
  /* stylelint-enable */

</style><link rel="stylesheet" href="./深入探讨defaultdict和dict的区别_files/OneSignalSDKStyles.css"><link type="text/css" rel="stylesheet" charset="UTF-8" href="./深入探讨defaultdict和dict的区别_files/translateelement.css"><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-37/html/container.html"></head>
<body>
<nav class="navbar fixed-top navbar-expand-lg navbar-dark flex-column">
<div class="container flex-row">
<a class="navbar-brand" href="https://realpython.com/">
<img src="./深入探讨defaultdict和dict的区别_files/real-python-logo.893c30edea53.svg" height="40" class="d-inline-block align-top" alt="Real Python">
</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarSupportedContent">
<ul class="navbar-nav mr-2 flex-fill">
<li class="nav-item">
<a class="nav-link" href="https://realpython.com/start-here/">Start&nbsp;Here</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="https://realpython.com/python-defaultdict/#" id="navbarDropdownLibrary" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
<span class="fa fa-graduation-cap"></span> Learn Python
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownLibrary">
<a class="dropdown-item" href="https://realpython.com/" style="color: #ff7e73; line-height: 110%;"><i class="fa fa-fw mr-1 fa-graduation-cap"></i> Python Tutorials →<br><small class="text-secondary">In-depth articles and tutorials</small></a>
<a class="dropdown-item" href="https://realpython.com/courses/" style="color: #abe5b1; line-height: 110%;"><i class="fa fa-fw mr-1 fa-film"></i> Video Courses →<br><small class="text-secondary">Step-by-step video lessons</small></a>
<a class="dropdown-item" href="https://realpython.com/quizzes/" style="color: #abe0e5; line-height: 110%;"><i class="fa fa-fw mr-1 fa-trophy"></i> Quizzes →<br><small class="text-secondary">Check your learning progress</small></a>
<a class="dropdown-item" href="https://realpython.com/learning-paths/" style="color: #ffc873; line-height: 110%;"><i class="fa fa-fw mr-1 fa-map-o"></i> Learning Paths →<br><small class="text-secondary">Guided study plans for accelerated learning</small></a>
<a class="dropdown-item" href="https://realpython.com/community/" style="color: #e5c6ab; line-height: 110%;"><i class="fa fa-fw mr-1 fa-slack"></i> Community →<br><small class="text-secondary">Learn with other Pythonistas</small></a>
<a class="dropdown-item pb-3" href="https://realpython.com/tutorials/all/" style="color: #b8abe5; line-height: 110%;"><i class="fa fa-fw mr-1 fa-tags"></i> Topics →<br><small class="text-secondary">Focus on a specific area or skill level</small></a>
<a class="dropdown-item border-top" href="https://realpython.com/account/join/"><i class="fa fa-fw fa-star text-warning"></i> Unlock All Content</a>
</div>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="https://realpython.com/python-defaultdict/#" id="navbarDropdownBooksCourses" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Store
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownBooksCourses">
<a class="dropdown-item" href="https://realpython.com/account/join/"><i class="fa fa-fw fa-star text-warning"></i> RP Membership</a>
<a class="dropdown-item" href="https://realpython.com/products/python-basics-book/">Python Basics Book</a>
<a class="dropdown-item" href="https://realpython.com/products/python-tricks-book/">Python Tricks Book</a>
<a class="dropdown-item" href="https://realpython.com/products/real-python-course/">The Real Python Course</a>
<a class="dropdown-item" href="https://realpython.com/products/managing-python-dependencies/">Managing Python Dependencies</a>
<a class="dropdown-item" href="https://realpython.com/products/sublime-python/">Sublime Text + Python Setup</a>
<a class="dropdown-item" href="https://realpython.com/products/pythonic-wallpapers/">Pythonic Wallpapers Pack</a>
<a class="dropdown-item" href="https://nerdlettering.com/" target="_blank">Python Mugs, T-Shirts, and More</a>
<a class="dropdown-item" href="https://www.pythonistacafe.com/" target="_blank">Pythonista Cafe Community</a>
<a class="dropdown-item border-top" href="https://realpython.com/products/">Browse All »</a>
</div>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="https://realpython.com/python-defaultdict/#" id="navbarDropdownMore" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
More
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMore">
<a class="dropdown-item" href="https://realpython.com/newsletter/">Python Newsletter</a>
<a class="dropdown-item" href="https://www.pythonjobshq.com/" target="_blank">Python Job Board</a>
<a class="dropdown-item" href="https://realpython.com/team/">The RP Team</a>
<a class="dropdown-item" href="https://realpython.com/write-for-us/">Become a Tutorial Author</a>
<a class="dropdown-item" href="https://realpython.com/become-an-instructor/">Become a Video Instructor</a>
</div>
</li>
</ul>
<div class="d-block d-xl-none">
<ul class="navbar-nav">
<li class="nav-item">
<a class="nav-link" href="https://realpython.com/search" title="Search"><span class="d-block d-lg-none"><i class="fa fa-search"></i> Search</span><span class="d-none d-lg-block"><i class="fa fa-search"></i></span></a>
</li>
</ul>
</div>
<div class="d-none d-xl-block">
<form class="form-inline my-2 my-lg-0 mr-2 flex-fill" action="https://realpython.com/search" method="GET">
<input class="search-field form-control form-control-md mr-sm-1 mr-lg-2 w-100" type="search" placeholder="Search…" aria-label="Search" name="q">
</form>
</div>
<ul class="navbar-nav">
<li class="nav-item form-inline">
<a class="ml-2 ml-lg-0 btn btn-sm btn-primary px-3" href="https://realpython.com/account/join/">Join</a>
</li>
<li class="nav-item">
<a class="btn text-light" href="https://realpython.com/account/login/">Sign‑In</a>
</li>
</ul>
</div>
</div>
</nav>
<div class="container main-content">
<div class="row justify-content-center">
<div class="col-md-11 col-lg-8 article">
<figure class="embed-responsive embed-responsive-16by9">
<img class="card-img-top m-0 p-0 embed-responsive-item rounded" style="object-fit: contain;" alt="Using the Python defaultdict Type for Handling Missing Keys" src="./深入探讨defaultdict和dict的区别_files/The-Python-defaultdict-Type_Watermarked.f6e14d903857.jpg" width="1920" height="1080" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/The-Python-defaultdict-Type_Watermarked.f6e14d903857.jpg&amp;w=480&amp;sig=7bb27522fce955ed5a710173fd6ebd5cbcc78677 480w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/The-Python-defaultdict-Type_Watermarked.f6e14d903857.jpg&amp;w=960&amp;sig=4b9ce632f16ef1158793bb0b871d70273d3e04ec 960w, https://files.realpython.com/media/The-Python-defaultdict-Type_Watermarked.f6e14d903857.jpg 1920w" sizes="75vw">
</figure>
<h1>Using the Python defaultdict Type for Handling Missing Keys</h1>
<p class="mb-0">
<span class="text-muted">by <a class="text-muted" href="https://realpython.com/python-defaultdict/#author">Leodanis Pozo Ramos</a>
<span class="ml-2 fa fa-clock-o"></span> Mar 11, 2020
<span class="ml-2 mr-1 fa fa-comments"></span><a class="text-muted" href="https://realpython.com/python-defaultdict/#reader-comments"><span class="disqus-comment-count" data-disqus-identifier="https://realpython.com/python-defaultdict/"></span></a>
<span class="ml-2 fa fa-tags"></span>
<a href="https://realpython.com/tutorials/basics/" class="badge badge-light text-muted">basics</a>
<a href="https://realpython.com/tutorials/python/" class="badge badge-light text-muted">python</a>
</span></p><div class="d-flex flex-row justify-content-between my-2">
<div class="align-self-center">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check%20out%20this%20%23Python%20tutorial:%20Using%20the%20Python%20defaultdict%20Type%20for%20Handling%20Missing%20Keys%20by%20@realpython&amp;url=https%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python%20article%20for%20you&amp;body=Check%20out%20this%20Python%20tutorial:%0A%0AUsing%20the%20Python%20defaultdict%20Type%20for%20Handling%20Missing%20Keys%0A%0Ahttps%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
</div>
<p></p>
<div class="article-body">
<div class="bg-light sidebar-module sidebar-module-inset" id="toc">
<p class="h3 mb-2 text-muted">Table of Contents</p>
<div class="toc">
<ul>
<li><a href="https://realpython.com/python-defaultdict/#handling-missing-keys-in-dictionaries">Handling Missing Keys in Dictionaries</a></li>
<li><a href="https://realpython.com/python-defaultdict/#understanding-the-python-defaultdict-type">Understanding the Python defaultdict Type</a></li>
<li><a href="https://realpython.com/python-defaultdict/#using-the-python-defaultdict-type">Using the Python defaultdict Type</a><ul>
<li><a href="https://realpython.com/python-defaultdict/#grouping-items">Grouping Items</a></li>
<li><a href="https://realpython.com/python-defaultdict/#grouping-unique-items">Grouping Unique Items</a></li>
<li><a href="https://realpython.com/python-defaultdict/#counting-items">Counting Items</a></li>
<li><a href="https://realpython.com/python-defaultdict/#accumulating-values">Accumulating Values</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-defaultdict/#diving-deeper-into-defaultdict">Diving Deeper Into defaultdict</a><ul>
<li><a href="https://realpython.com/python-defaultdict/#defaultdict-vs-dict">defaultdict vs dict</a></li>
<li><a href="https://realpython.com/python-defaultdict/#defaultdictdefault_factory">defaultdict.default_factory</a></li>
<li><a href="https://realpython.com/python-defaultdict/#defaultdict-vs-dictsetdefault">defaultdict vs dict.setdefault()</a></li>
<li><a href="https://realpython.com/python-defaultdict/#defaultdict__missing__">defaultdict.__missing__()</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-defaultdict/#emulating-the-python-defaultdict-type">Emulating the Python defaultdict Type</a></li>
<li><a href="https://realpython.com/python-defaultdict/#passing-arguments-to-default_factory">Passing Arguments to .default_factory</a><ul>
<li><a href="https://realpython.com/python-defaultdict/#using-lambda">Using lambda</a></li>
<li><a href="https://realpython.com/python-defaultdict/#using-functoolspartial">Using functools.partial()</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-defaultdict/#conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:12.5%;"></div>
<div class="rpad" data-unit="8x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/33714436793/?c=3539665479&amp;p=58946116052&amp;r=80047" rel="nofollow" target="_blank"><img src="./深入探讨defaultdict和dict的区别_files/7ddbb31a5dbedecee07b41fe5413748d" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div>
</div>
</div>
<p>A common problem that you can face when working with Python <a href="https://realpython.com/python-dicts/">dictionaries</a> is to try to access or modify keys that don’t exist in the dictionary. This will raise a <a href="https://realpython.com/python-keyerror/"><code>KeyError</code></a> and break up your code execution. To handle these kinds of situations, the <a href="https://docs.python.org/3/library/index.html">standard library</a> provides the Python <strong><code>defaultdict</code></strong> type, a dictionary-like class that’s available for you in <a href="https://docs.python.org/3/library/collections.html#module-collections"><code>collections</code></a>.</p>
<p>The Python <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict"><code>defaultdict</code></a> type behaves almost exactly like a regular Python dictionary, but if you try to access or modify a missing key, then <code>defaultdict</code> will automatically create the key and generate a default value for it. This makes <code>defaultdict</code> a valuable option for handling missing keys in dictionaries.</p>
<p><strong>In this tutorial, you’ll learn:</strong></p>
<ul>
<li>How to use the Python <code>defaultdict</code> type for <strong>handling missing keys</strong> in a dictionary</li>
<li>When and why to use a Python <code>defaultdict</code> rather than a regular <a href="https://realpython.com/python-dicts/"><code>dict</code></a></li>
<li>How to use a <code>defaultdict</code> for <strong>grouping</strong>, <strong>counting</strong>, and <strong>accumulating</strong> operations</li>
</ul>
<p>With this knowledge under your belt, you’ll be in a better condition to effectively use the Python <code>defaultdict</code> type in your day-to-day programming challenges.</p>
<p>To get the most out of this tutorial, you should have some previous understanding of what Python <a href="https://realpython.com/courses/dictionaries-python/">dictionaries</a> are and how to work with them. If you need to freshen up, then check out the following resources:</p>
<ul>
<li><a href="https://realpython.com/python-dicts/">Dictionaries in Python</a> (Tutorial)</li>
<li><a href="https://realpython.com/courses/dictionaries-python/">Dictionaries in Python</a> (Course)</li>
<li><a href="https://realpython.com/iterate-through-dictionary-python/">How to Iterate Through a Dictionary in Python</a></li>
</ul>
<div class="alert alert-warning" role="alert"><p><strong>Free Bonus:</strong> <a href="https://realpython.com/python-defaultdict/" class="alert-link" data-toggle="modal" data-target="#modal-python-cheat-sheet-shortened" data-focus="false">Click here to get a Python Cheat Sheet</a> and learn the basics of Python 3, like working with data types, dictionaries, lists, and Python functions.</p></div>
<div class="w-100 js-needs-scaling" style="transform-origin: 0px 0px; transform: scale(0.947802);"><div id="waldo-tag-4996" data-processed="true" data-google-query-id="CM_tur6ZmugCFUc5lgodS4YMlw"><div id="google_ads_iframe_/124067137/realpython728x90FS_1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/124067137/realpython728x90FS_1_0" title="3rd party ad content" name="google_ads_iframe_/124067137/realpython728x90FS_1_0" width="728" height="90" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" data-google-container-id="1" style="border: 0px; vertical-align: bottom;" data-load-complete="true" src="./深入探讨defaultdict和dict的区别_files/saved_resource.html"></iframe></div></div> <a class="small text-muted js-disclosure" href="https://realpython.com/account/join/" rel="nofollow" style=""> <i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><h2 id="handling-missing-keys-in-dictionaries">Handling Missing Keys in Dictionaries</h2>
<p>A common issue that you can face when working with Python dictionaries is <strong>how to handle missing keys</strong>. If your code is heavily based on dictionaries, or if you’re creating dictionaries on the fly all the time, then you’ll soon notice that dealing with frequent <a href="https://realpython.com/python-keyerror/"><code>KeyError</code> exceptions</a> can be quite annoying and can add extra complexity to your code. With Python dictionaries, you have at least four available ways to handle missing keys:</p>
<ol>
<li>Use <code>.setdefault()</code></li>
<li>Use <code>.get()</code></li>
<li>Use the <code>key in dict</code> idiom</li>
<li>Use a <a href="https://docs.python.org/3/reference/compound_stmts.html#try"><code>try</code></a> and <code>except</code> block</li>
</ol>
<p>The <a href="https://docs.python.org/">Python docs</a> explain <code>.setdefault()</code> and <code>.get()</code> as follows:</p>
<blockquote>
<p><strong><code>setdefault(key[, default])</code></strong></p>
<p>If <code>key</code> is in the dictionary, return its value. If not, insert <code>key</code> with a value of <code>default</code> and return <code>default</code>. <code>default</code> defaults to <code>None</code>.</p>
<p><strong><code>get(key[, default])</code></strong></p>
<p>Return the value for <code>key</code> if <code>key</code> is in the dictionary, else <code>default</code>. If <code>default</code> is not given, it defaults to <code>None</code>, so that this method never raises a <a href="https://docs.python.org/3/library/exceptions.html#KeyError"><code>KeyError</code></a>.</p>
<p>(<a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict">Source</a>)</p>
</blockquote>
<p>Here’s an example of how you can use <code>.setdefault()</code> to handle missing keys in a dictionary:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span><span class="p">[</span><span class="s1">'missing_key'</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">"&lt;stdin&gt;"</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="n">a_dict</span><span class="p">[</span><span class="s1">'missing_key'</span><span class="p">]</span>
<span class="gr">KeyError</span>: <span class="n">'missing_key'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">'missing_key'</span><span class="p">,</span> <span class="s1">'default value'</span><span class="p">)</span>
<span class="go">'default value'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span><span class="p">[</span><span class="s1">'missing_key'</span><span class="p">]</span>
<span class="go">'default value'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">'missing_key'</span><span class="p">,</span> <span class="s1">'another default value'</span><span class="p">)</span>
<span class="go">'default value'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span>
<span class="go">{'missing_key': 'default value'}</span>
</code></pre></div>
<p>In the above code, you use <code>.setdefault()</code> to generate a default value for <code>missing_key</code>. Notice that your dictionary, <code>a_dict</code>, now has a new key called <code>missing_key</code> whose value is <code>'default value'</code>. This key didn’t exist before you called <code>.setdefault()</code>. Finally, if you call <code>.setdefault()</code> on an existing key, then the call won’t have any effect on the dictionary. Your key will hold the original value instead of the new default value.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> In the above code example, you get an exception, and Python shows you a <strong>traceback</strong> message, which tells you that you’re trying to access a missing key in <code>a_dict</code>. If you want to dive deeper into how to decipher and understand a Python traceback, then check out <a href="https://realpython.com/python-traceback/">Understanding the Python Traceback</a>.</p>
</div>
<p>On the other hand, if you use <code>.get()</code>, then you can code something like this:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'missing_key'</span><span class="p">,</span> <span class="s1">'default value'</span><span class="p">)</span>
<span class="go">'default value'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span>
<span class="go">{}</span>
</code></pre></div>
<p>Here, you use <code>.get()</code> to generate a default value for <code>missing_key</code>, but this time, your dictionary stays empty. This is because <code>.get()</code> returns the default value, but this value isn’t added to the underlying dictionary. For example, if you have a dictionary called <code>D</code>, then you can assume that <code>.get()</code> works something like this:</p>
<div class="highlight text"><pre><span></span><code>D.get(key, default) -&gt; D[key] if key in D, else default
</code></pre></div>
<p>With this pseudo-code, you can understand how <code>.get()</code> works internally. If the key exists, then <code>.get()</code> returns the value mapped to that key. Otherwise, the default value is returned. Your code never creates or assigns a value to <code>key</code>. In this example, <code>default</code> defaults to <code>None</code>.</p>
<p>You can also use <a href="https://realpython.com/courses/python-conditional-statements/">conditional statements</a> to handle missing keys in dictionaries. Take a look at the following example, which uses the <code>key in dict</code> idiom:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="s1">'key'</span> <span class="ow">in</span> <span class="n">a_dict</span><span class="p">:</span>
<span class="gp">... </span>    <span class="c1"># Do something with 'key'...</span>
<span class="gp">... </span>    <span class="n">a_dict</span><span class="p">[</span><span class="s1">'key'</span><span class="p">]</span>
<span class="gp">... </span><span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a_dict</span><span class="p">[</span><span class="s1">'key'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'default value'</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span>
<span class="go">{'key': 'default value'}</span>
</code></pre></div>
<p>In this code, you use an <code>if</code> statement along with the <a href="https://docs.python.org/3/library/stdtypes.html#common-sequence-operations"><code>in</code> operator</a> to check if <code>key</code> is present in <code>a_dict</code>. If so, then you can perform any action with <code>key</code> or with its value. Otherwise, you create the new key, <code>key</code>, and assign it a <code>'default value'</code>. Note that the above code works similar to <code>.setdefault()</code> but takes four lines of code, while <code>.setdefault()</code> would only take one line (in addition to being more readable).</p>
<p>You can also walk around the <code>KeyError</code> by using a <code>try</code> and <code>except</code> block to handle the exception. Consider the following piece of code:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="c1"># Do something with 'key'...</span>
<span class="gp">... </span>    <span class="n">a_dict</span><span class="p">[</span><span class="s1">'key'</span><span class="p">]</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">a_dict</span><span class="p">[</span><span class="s1">'key'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'default value'</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_dict</span>
<span class="go">{'key': 'default value'}</span>
</code></pre></div>
<p>The <code>try</code> and <code>except</code> block in the above example catches the <code>KeyError</code> whenever you try to get access to a missing key. In the <code>except</code> clause, you create the <code>key</code> and assign it a <code>'default value'</code>.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> If missing keys are uncommon in your code, then you might prefer to use a <code>try</code> and <code>except</code> block (<a href="https://docs.python.org/3/glossary.html#term-eafp">EAFP coding style</a>) to catch the <code>KeyError</code> exception. This is because the code doesn’t check the existence of every key and only handles a few exceptions, if any.</p>
<p>On the other hand, if missing keys are quite common in your code, then the conditional statement (<a href="https://docs.python.org/3/glossary.html#term-lbyl">LBYL coding style</a>) can be a better choice because checking for keys can be less costly than handling frequent exceptions.</p>
</div>
<p>So far, you’ve learned how to handle missing keys using the tools that <code>dict</code> and Python offer you. However, the examples you saw here are quite verbose and hard to read. They might not be as straightforward as you might want. That’s why the <a href="https://docs.python.org/3/library/index.html">Python standard library</a> provides a more elegant, <a href="https://realpython.com/learning-paths/writing-pythonic-code/">Pythonic</a>, and efficient solution. That solution is <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict"><code>collections.defaultdict</code></a>, and that’s what you’ll be covering from now on.</p>
<div class="w-100 js-needs-scaling" style="transform-origin: 0px 0px; transform: scale(0.947802);"><div id="waldo-tag-4998" data-processed="true" data-google-query-id="CNTCoNmZmugCFRZzYAodw6MNUA"><div id="google_ads_iframe_/124067137/realpython728x90FS_2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/124067137/realpython728x90FS_2_0" title="3rd party ad content" name="google_ads_iframe_/124067137/realpython728x90FS_2_0" width="728" height="90" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" data-google-container-id="2" style="border: 0px; vertical-align: bottom;" data-load-complete="true" src="./深入探讨defaultdict和dict的区别_files/saved_resource(1).html"></iframe></div></div> <a class="small text-muted js-disclosure" href="https://realpython.com/account/join/" rel="nofollow" style=""> <i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><h2 id="understanding-the-python-defaultdict-type">Understanding the Python <code>defaultdict</code> Type</h2>
<p>The Python standard library provides <a href="https://docs.python.org/3/library/collections.html#module-collections"><code>collections</code></a>, which is a module that implements specialized container types. One of those is the Python <code>defaultdict</code> type, which is an alternative to <code>dict</code> that’s specifically designed to help you out with missing keys. <code>defaultdict</code> is a Python type that inherits from <code>dict</code>:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">issubclass</span><span class="p">(</span><span class="n">defaultdict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
<span class="go">True</span>
</code></pre></div>
<p>The above code shows that the Python <code>defaultdict</code> type is a <strong>subclass</strong> of <code>dict</code>. This means that <code>defaultdict</code> inherits most of the behavior of <code>dict</code>. So, you can say that <code>defaultdict</code> is much like an ordinary dictionary.</p>
<p>The main difference between <code>defaultdict</code> and <code>dict</code> is that when you try to access or modify a <code>key</code> that’s not present in the dictionary, a default <code>value</code> is automatically given to that <code>key</code>. In order to provide this functionality, the Python <code>defaultdict</code> type does two things:</p>
<ol>
<li>It overrides <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict.__missing__"><code>.__missing__()</code></a>.</li>
<li>It adds <code>.default_factory</code>, a writable instance variable that needs to be provided at the time of instantiation.</li>
</ol>
<p>The instance variable <code>.default_factory</code> will hold the first argument passed into <a href="https://docs.python.org/3/reference/datamodel.html#object.__init__"><code>defaultdict.__init__()</code></a>. This argument can take a valid Python callable or <code>None</code>. If a callable is provided, then it’ll automatically be called by <code>defaultdict</code> whenever you try to access or modify the value associated with a missing key.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> All the remaining arguments to the class initializer are treated as if they were passed to the initializer of regular <code>dict</code>, including the keyword arguments.</p>
</div>
<p>Take a look at how you can create and properly initialize a <code>defaultdict</code>:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Correct instantiation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>  <span class="c1"># Pass list to .default_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="p">[</span><span class="s1">'one'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Add a key-value pair</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="p">[</span><span class="s1">'missing'</span><span class="p">]</span>  <span class="c1"># Access a missing key returns an empty list</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="p">[</span><span class="s1">'another_missing'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Modify a missing key</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'one': 1, 'missing': [], 'another_missing': [4]})</span>
</code></pre></div>
<p>Here, you pass <a href="https://realpython.com/python-lists-tuples/#python-lists"><code>list</code></a> to <code>.default_factory</code> when you create the dictionary. Then, you use <code>def_dict</code> just like a regular dictionary. Note that when you try to access or modify the value mapped to a non-existent key, the dictionary assigns it the default value that results from calling <code>list()</code>.</p>
<p>Keep in mind that you must pass a valid Python callable object to <code>.default_factory</code>, so remember not to call it using the parentheses at initialization time. This can be a common issue when you start using the Python <code>defaultdict</code> type. Take a look at the following code:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Wrong instantiation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">())</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">"&lt;stdin&gt;"</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="n">def_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">())</span>
<span class="gr">TypeError</span>: <span class="n">first argument must be callable or None</span>
</code></pre></div>
<p>Here, you try to create a <code>defaultdict</code> by passing <code>list()</code> to <code>.default_factory</code>. The call to <code>list()</code> raises a <code>TypeError</code>, which tells you that the first argument must be callable or <code>None</code>.</p>
<p>With this introduction to the Python <code>defaultdict</code> type, you can get start coding with practical examples. The next few sections will walk you through some common use cases where you can rely on a <code>defaultdict</code> to provide an elegant, efficient, and Pythonic solution.</p>
<h2 id="using-the-python-defaultdict-type">Using the Python <code>defaultdict</code> Type</h2>
<p>Sometimes, you’ll use a mutable built-in collection (a <code>list</code>, <code>dict</code>, or <a href="https://realpython.com/python-sets/"><code>set</code></a>) as values in your Python dictionaries. In these cases, you’ll need to <strong>initialize the keys</strong> before first use, or you’ll get a <code>KeyError</code>. You can either do this process manually or automate it using a Python <code>defaultdict</code>. In this section, you’ll learn how to use the Python <code>defaultdict</code> type for solving some common programming problems:</p>
<ul>
<li><strong>Grouping</strong> the items in a collection</li>
<li><strong>Counting</strong> the items in a collection</li>
<li><strong>Accumulating</strong> the values in a collection</li>
</ul>
<p>You’ll be covering some examples that use <code>list</code>, <code>set</code>, <code>int</code>, and <code>float</code> to perform grouping, counting, and accumulating operations in a user-friendly and efficient way.</p>
<h3 id="grouping-items">Grouping Items</h3>
<p>A typical use of the Python <code>defaultdict</code> type is to set <code>.default_factory</code> to <code>list</code> and then build a dictionary that maps keys to lists of values. With this <code>defaultdict</code>, if you try to get access to any missing key, then the dictionary runs the following steps:</p>
<ol>
<li><strong>Call</strong> <code>list()</code> to create a new empty <code>list</code></li>
<li><strong>Insert</strong> the empty <code>list</code> into the dictionary using the missing key as <code>key</code></li>
<li><strong>Return</strong> a reference to that <code>list</code></li>
</ol>
<p>This allows you to write code like this:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'key'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'key': [1]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'key'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'key': [1, 2]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'key'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'key': [1, 2, 3]})</span>
</code></pre></div>
<p>Here, you create a Python <code>defaultdict</code> called <code>dd</code> and pass <code>list</code> to <code>.default_factory</code>. Notice that even when <code>key</code> isn’t defined, you can append values to it without getting a <code>KeyError</code>. That’s because <code>dd</code> automatically calls <code>.default_factory</code> to generate a default value for the missing <code>key</code>.</p>
<p>You can use <code>defaultdict</code> along with <code>list</code> to group the items in a sequence or a collection. Suppose that you’ve retrieved the following data from your company’s database:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Department</th>
<th>Employee Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sales</td>
<td>John Doe</td>
</tr>
<tr>
<td>Sales</td>
<td>Martin Smith</td>
</tr>
<tr>
<td>Accounting</td>
<td>Jane Doe</td>
</tr>
<tr>
<td>Marketing</td>
<td>Elizabeth Smith</td>
</tr>
<tr>
<td>Marketing</td>
<td>Adam Doe</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<p>With this data, you create an initial <code>list</code> of <a href="https://realpython.com/python-lists-tuples/#python-tuples"><code>tuple</code></a> objects like the following:</p>
<div class="highlight python"><pre><span></span><code><span class="n">dep</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'Sales'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Sales'</span><span class="p">,</span> <span class="s1">'Martin Smith'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Accounting'</span><span class="p">,</span> <span class="s1">'Jane Doe'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Elizabeth Smith'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Adam Doe'</span><span class="p">)]</span>
</code></pre></div>
<p>Now, you need to create a dictionary that groups the employees by department. To do this, you can use a <code>defaultdict</code> as follows:</p>
<div class="highlight python"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="n">dep_dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">department</span><span class="p">,</span> <span class="n">employee</span> <span class="ow">in</span> <span class="n">dep</span><span class="p">:</span>
    <span class="n">dep_dd</span><span class="p">[</span><span class="n">department</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">employee</span><span class="p">)</span>
</code></pre></div>
<p>Here, you create a <code>defaultdict</code> called <code>dep_dd</code> and use a <a href="https://realpython.com/python-for-loop/"><code>for</code> loop</a> to iterate through your <code>dep</code> list. The statement <code>dep_dd[department].append(employee)</code> creates the keys for the departments, initializes them to an empty list, and then appends the employees to each department. Once you run this code, your <code>dep_dd</code> will look something like this:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="go">defaultdict(&lt;class 'list'&gt;, {'Sales': ['John Doe', 'Martin Smith'],</span>
<span class="go">                             'Accounting' : ['Jane Doe'],</span>
<span class="go">                             'Marketing': ['Elizabeth Smith', 'Adam Doe']})</span>
</code></pre></div>
<p>In this example, you group the employees by their department using a <code>defaultdict</code> with <code>.default_factory</code> set to <code>list</code>. To do this with a regular dictionary, you can use <code>dict.setdefault()</code> as follows:</p>
<div class="highlight python"><pre><span></span><code><span class="n">dep_d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">department</span><span class="p">,</span> <span class="n">employee</span> <span class="ow">in</span> <span class="n">dep</span><span class="p">:</span>
    <span class="n">dep_d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">department</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">employee</span><span class="p">)</span>
</code></pre></div>
<p>This code is straightforward, and you’ll find similar code quite often in your work as a Python coder. However, the <code>defaultdict</code> version is arguably more readable, and for large datasets, it can also be a lot <a href="https://realpython.com/python-defaultdict/#defaultdict-vs-dictsetdefault">faster and more efficient</a>. So, if speed is a concern for you, then you should consider using a <code>defaultdict</code> instead of a standard <code>dict</code>.</p>
<div class="w-100 text-center js-needs-scaling" style="transform-origin: 0 0;"><div id="waldo-tag-5000" data-processed="true" data-google-query-id="COHq6IyamugCFU3KvQodgW4AVA"><div id="google_ads_iframe_/124067137/realpython728x90FS_3_0__container__" style="border: 0pt none; display: inline-block; width: 300px; height: 250px;"><iframe frameborder="0" src="./深入探讨defaultdict和dict的区别_files/container.html" id="google_ads_iframe_/124067137/realpython728x90FS_3_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="300" height="250" data-is-safeframe="true" sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="3" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div> <a class="small text-muted js-disclosure" href="https://realpython.com/account/join/" rel="nofollow" style=""> <i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><h3 id="grouping-unique-items">Grouping Unique Items</h3>
<p>Continue working with the data of departments and employees from the previous section. After some processing, you realize that a few employees have been <strong>duplicated</strong> in the database by mistake. You need to clean up the data and remove the duplicated employees from your <code>dep_dd</code> dictionary. To do this, you can use a <code>set</code> as the <code>.default_factory</code> and rewrite your code as follows:</p>
<div class="highlight python"><pre><span></span><code><span class="n">dep</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'Sales'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Sales'</span><span class="p">,</span> <span class="s1">'Martin Smith'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Accounting'</span><span class="p">,</span> <span class="s1">'Jane Doe'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Elizabeth Smith'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Elizabeth Smith'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Adam Doe'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Adam Doe'</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Adam Doe'</span><span class="p">)]</span>

<span class="n">dep_dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
<span class="k">for</span> <span class="n">department</span><span class="p">,</span> <span class="n">employee</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="n">dep_dd</span><span class="p">[</span><span class="n">department</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">employee</span><span class="p">)</span>
</code></pre></div>
<p>In this example, you set <code>.default_factory</code> to <code>set</code>. <strong>Sets</strong> are <strong>collections of unique objects</strong>, which means that you can’t create a <code>set</code> with repeated items. This is a really interesting feature of sets, which guarantees that you won’t have repeated items in your final dictionary.</p>
<h3 id="counting-items">Counting Items</h3>
<p>If you set <code>.default_factory</code> to <a href="https://docs.python.org/3/library/functions.html#int"><code>int</code></a>, then your <code>defaultdict</code> will be useful for <strong>counting the items</strong> in a sequence or collection. When you call <code>int()</code> with no arguments, the function returns <code>0</code>, which is the typical value you’d use to initialize a counter.</p>
<p>To continue with the example of the company database, suppose you want to build a dictionary that counts the number of employees per department. In this case, you can code something like this:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dep</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'Sales'</span><span class="p">,</span> <span class="s1">'John Doe'</span><span class="p">),</span>
<span class="gp">... </span>       <span class="p">(</span><span class="s1">'Sales'</span><span class="p">,</span> <span class="s1">'Martin Smith'</span><span class="p">),</span>
<span class="gp">... </span>       <span class="p">(</span><span class="s1">'Accounting'</span><span class="p">,</span> <span class="s1">'Jane Doe'</span><span class="p">),</span>
<span class="gp">... </span>       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Elizabeth Smith'</span><span class="p">),</span>
<span class="gp">... </span>       <span class="p">(</span><span class="s1">'Marketing'</span><span class="p">,</span> <span class="s1">'Adam Doe'</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">department</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">dep</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">dd</span><span class="p">[</span><span class="n">department</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'int'&gt;, {'Sales': 2, 'Accounting': 1, 'Marketing': 2})</span>
</code></pre></div>
<p>Here, you set <code>.default_factory</code> to <code>int</code>. When you call <code>int()</code> with no argument, the returned value is <code>0</code>. You can use this default value to start counting the employees that work in each department. For this code to work correctly, you need a clean dataset. There must be no repeated data. Otherwise, you’ll need to filter out the repeated employees.</p>
<p>Another example of counting items is the <code>mississippi</code> example, where you count the number of times each letter in a word is repeated. Take a look at the following code:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">'mississippi'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">dd</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'int'&gt;, {'m': 1, 'i': 4, 's': 4, 'p': 2})</span>
</code></pre></div>
<p>In the above code, you create a <code>defaultdict</code> with <code>.default_factory</code> set to <code>int</code>. This sets the default value for any given key to <code>0</code>. Then, you use a <code>for</code> loop to traverse the <a href="https://realpython.com/python-strings/">string</a> <code>s</code> and use an <a href="https://docs.python.org/3/reference/simple_stmts.html#assignment-statements">augmented assignment operation</a> to add <code>1</code> to the counter in every iteration. The keys of <code>dd</code> will be the letters in <code>mississippi</code>.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> Python’s <a href="https://docs.python.org/3/whatsnew/2.0.html#augmented-assignment">augmented assignment operators</a> are a handy shortcut to common operations.</p>
<p>Take a look at the following examples:</p>
<ul>
<li><code>var += 1</code> is equivalent to <code>var = var + 1</code></li>
<li><code>var -= 1</code> is equivalent to <code>var = var - 1</code></li>
<li><code>var *= 1</code> is equivalent to <code>var = var * 1</code></li>
</ul>
<p>This is just a sample of how the augmented assignment operators work. You can take a look at the <a href="https://docs.python.org/3/whatsnew/2.0.html#augmented-assignment">official documentation</a> to learn more about this feature.</p>
</div>
<p>As counting is a relatively common task in programming, the Python dictionary-like class <a href="https://docs.python.org/3/library/collections.html#collections.Counter"><code>collections.Counter</code></a> is specially designed for counting items in a sequence. With <code>Counter</code>, you can write the <code>mississippi</code> example as follows:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">'mississippi'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span>
<span class="go">Counter({'i': 4, 's': 4, 'p': 2, 'm': 1})</span>
</code></pre></div>
<p>In this case, <code>Counter</code> does all the work for you! You only need to pass in a sequence, and the dictionary will count its items, storing them as keys and the counts as values. Note that this example works because Python strings are also a sequence type.</p>
<h3 id="accumulating-values">Accumulating Values</h3>
<p>Sometimes you’ll need to calculate the <strong>total sum</strong> of the values in a sequence or collection. Let’s say you have the following <a href="https://realpython.com/openpyxl-excel-spreadsheets-python/">Excel sheet</a> with data about the sales of your Python website:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Products</th>
<th class="text-center">July</th>
<th class="text-center">August</th>
<th class="text-center">September</th>
</tr>
</thead>
<tbody>
<tr>
<td>Books</td>
<td class="text-center">1250.00</td>
<td class="text-center">1300.00</td>
<td class="text-center">1420.00</td>
</tr>
<tr>
<td>Tutorials</td>
<td class="text-center">560.00</td>
<td class="text-center">630.00</td>
<td class="text-center">750.00</td>
</tr>
<tr>
<td>Courses</td>
<td class="text-center">2500.00</td>
<td class="text-center">2430.00</td>
<td class="text-center">2750.00</td>
</tr>
</tbody>
</table>
</div>
<p>Next, you process the data using Python and get the following <code>list</code> of <code>tuple</code> objects:</p>
<div class="highlight python"><pre><span></span><code><span class="n">incomes</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'Books'</span><span class="p">,</span> <span class="mf">1250.00</span><span class="p">),</span>
           <span class="p">(</span><span class="s1">'Books'</span><span class="p">,</span> <span class="mf">1300.00</span><span class="p">),</span>
           <span class="p">(</span><span class="s1">'Books'</span><span class="p">,</span> <span class="mf">1420.00</span><span class="p">),</span>
           <span class="p">(</span><span class="s1">'Tutorials'</span><span class="p">,</span> <span class="mf">560.00</span><span class="p">),</span>
           <span class="p">(</span><span class="s1">'Tutorials'</span><span class="p">,</span> <span class="mf">630.00</span><span class="p">),</span>
           <span class="p">(</span><span class="s1">'Tutorials'</span><span class="p">,</span> <span class="mf">750.00</span><span class="p">),</span>
           <span class="p">(</span><span class="s1">'Courses'</span><span class="p">,</span> <span class="mf">2500.00</span><span class="p">),</span>
           <span class="p">(</span><span class="s1">'Courses'</span><span class="p">,</span> <span class="mf">2430.00</span><span class="p">),</span>
           <span class="p">(</span><span class="s1">'Courses'</span><span class="p">,</span> <span class="mf">2750.00</span><span class="p">),]</span>
</code></pre></div>
<p>With this data, you want to calculate the total income per product. To do that, you can use a Python <code>defaultdict</code> with <code>float</code> as <code>.default_factory</code> and then code something like this:</p>
<div class="highlight python"><pre><span></span><code><span class="lineno"> 1 </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="lineno"> 2 </span>
<span class="lineno"> 3 </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="lineno"> 4 </span><span class="k">for</span> <span class="n">product</span><span class="p">,</span> <span class="n">income</span> <span class="ow">in</span> <span class="n">incomes</span><span class="p">:</span>
<span class="lineno"> 5 </span>    <span class="n">dd</span><span class="p">[</span><span class="n">product</span><span class="p">]</span> <span class="o">+=</span> <span class="n">income</span>
<span class="lineno"> 6 </span>
<span class="lineno"> 7 </span><span class="k">for</span> <span class="n">product</span><span class="p">,</span> <span class="n">income</span> <span class="ow">in</span> <span class="n">dd</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="lineno"> 8 </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Total income for </span><span class="si">{product}</span><span class="s1">: $</span><span class="si">{income:,.2f}</span><span class="s1">'</span><span class="p">)</span>
</code></pre></div>
<p>Here’s what this code does:</p>
<ul>
<li><strong>In line 1</strong>, you import the Python <code>defaultdict</code> type.</li>
<li><strong>In line 3</strong>, you create a <code>defaultdict</code> object with <code>.default_factory</code> set to <code>float</code>.</li>
<li><strong>In line 4</strong>, you define a <code>for</code> loop to iterate through the items of <code>incomes</code>.</li>
<li><strong>In line 5</strong>, you use an augmented assignment operation (<code>+=</code>) to accumulate the incomes per product in the dictionary.</li>
</ul>
<p>The second loop iterates through the items of <code>dd</code> and prints the incomes to your screen.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> If you want to dive deeper into dictionary iteration, check out <a href="https://realpython.com/iterate-through-dictionary-python/">How to Iterate Through a Dictionary in Python</a>.</p>
</div>
<p>If you put all this code into a file called <code>incomes.py</code> and run it from your command line, then you’ll get the following output:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$</span> python3 incomes.py
<span class="go">Total income for Books: $3,970.00</span>
<span class="go">Total income for Tutorials: $1,940.00</span>
<span class="go">Total income for Courses: $7,680.00</span>
</code></pre></div>
<p>You now have a summary of incomes per product, so you can make decisions on which strategy to follow for increasing the total income of your site.</p>
<div class="w-100 text-center js-needs-scaling" style="transform-origin: 0 0;"><div id="waldo-tag-5002" data-processed="true" data-google-query-id="CJ7iioibmugCFQpplgod2JoNnQ"><div id="google_ads_iframe_/124067137/realpython728x90FS_4_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/124067137/realpython728x90FS_4_0" title="3rd party ad content" name="google_ads_iframe_/124067137/realpython728x90FS_4_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="4" data-load-complete="true" src="./深入探讨defaultdict和dict的区别_files/saved_resource(2).html"></iframe></div></div> <a class="small text-muted js-disclosure" href="https://realpython.com/account/join/" rel="nofollow" style=""> <i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><h2 id="diving-deeper-into-defaultdict">Diving Deeper Into <code>defaultdict</code></h2>
<p>So far, you’ve learned how to use the Python <code>defaultdict</code> type by coding some practical examples. At this point, you can dive deeper into <strong>type implementation</strong> and other working details. That’s what you’ll be covering in the next few sections.</p>
<h3 id="defaultdict-vs-dict"><code>defaultdict</code> vs <code>dict</code></h3>
<p>For you to better understand the Python <code>defaultdict</code> type, a good exercise would be to compare it with its superclass, <code>dict</code>. If you want to know the methods and attributes that are specific to the Python <code>defaultdict</code> type, then you can run the following line of code:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="nb">set</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">defaultdict</span><span class="p">))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="nb">dict</span><span class="p">))</span>
<span class="go">{'__copy__', 'default_factory', '__missing__'}</span>
</code></pre></div>
<p>In the above code, you use <a href="https://docs.python.org/3/library/functions.html#dir"><code>dir()</code></a> to get the list of valid attributes for <code>dict</code> and <code>defaultdict</code>. Then, you use a <a href="https://realpython.com/python-sets/"><code>set</code></a> difference to get the set of methods and attributes that you can only find in <code>defaultdict</code>. As you can see, the differences between these two classes are. You have two methods and one instance attribute. The following table shows what the methods and the attribute are for:</p>
<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Method or Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.__copy__()</code></td>
<td>Provides support for <code>copy.copy()</code></td>
</tr>
<tr>
<td><code>.default_factory</code></td>
<td>Holds the callable invoked by <code>.__missing__()</code> to automatically provide default values for missing keys</td>
</tr>
<tr>
<td><code>.__missing__(key)</code></td>
<td>Gets called when <code>.__getitem__()</code> can’t find <code>key</code></td>
</tr>
</tbody>
</table>
</div>
<p>In the above table, you can see the methods and the attribute that make a <code>defaultdict</code> different from a regular <code>dict</code>. The rest of the methods are the same in both classes.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> If you initialize a <code>defaultdict</code> using a valid callable, then you won’t get a <code>KeyError</code> when you try to get access to a missing key. Any key that doesn’t exist gets the value returned by <code>.default_factory</code>.</p>
</div>
<p>Additionally, you might notice that a <code>defaultdict</code> is equal to a <code>dict</code> with the same items:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">std_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">numbers</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">letters</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">std_dict</span>
<span class="go">{'numbers': [1, 2, 3], 'letters': ['a', 'b', 'c']}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">numbers</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">letters</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'numbers': [1, 2, 3], 'letters': ['a', 'b', 'c']})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">std_dict</span> <span class="o">==</span> <span class="n">def_dict</span>
<span class="go">True</span>
</code></pre></div>
<p>Here, you create a regular dictionary <code>std_dict</code> with some arbitrary items. Then, you create a <code>defaultdict</code> with the same items. If you test both dictionaries for content equality, then you’ll see that they’re equal.</p>
<h3 id="defaultdictdefault_factory"><code>defaultdict.default_factory</code></h3>
<p>The first argument to the Python <code>defaultdict</code> type must be a <strong>callable</strong> that takes no arguments and returns a value. This argument is assigned to the instance attribute, <code>.default_factory</code>. For this, you can use any callable, including functions, methods, classes, type objects, or any other valid callable. The default value of <code>.default_factory</code> is <code>None</code>.</p>
<p>If you instantiate <code>defaultdict</code> without passing a value to <code>.default_factory</code>, then the dictionary will behave like a regular <code>dict</code> and the usual <code>KeyError</code> will be raised for missing key lookup or modification attempts:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'missing_key'</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">"&lt;stdin&gt;"</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="n">dd</span><span class="p">[</span><span class="s1">'missing_key'</span><span class="p">]</span>
<span class="gr">KeyError</span>: <span class="n">'missing_key'</span>
</code></pre></div>
<p>Here, you instantiate the Python <code>defaultdict</code> type with no arguments. In this case, the instance behaves like a standard dictionary. So, if you try to access or modify a missing key, then you’ll get the usual <code>KeyError</code>. From this point on, you can use <code>dd</code> as a normal Python dictionary and, unless you assign a new callable to <code>.default_factory</code>, you won’t be able to use the ability of <code>defaultdict</code> to handle missing keys automatically.</p>
<p>If you pass <code>None</code> to the first argument of <code>defaultdict</code>, then the instance will behave the same way you saw in the above example. That’s because <code>.default_factory</code> defaults to <code>None</code>, so both initializations are equivalent. On the other hand, if you pass a valid callable object to <code>.default_factory</code>, then you can use it to handle missing keys in a user-friendly way. Here’s an example where you pass <code>list</code> to <code>.default_factory</code>:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="o">.</span><span class="n">default_factory</span>
<span class="go">&lt;class 'list'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'letters': ['a', 'b', 'c']})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'numbers'</span><span class="p">]</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'letters': ['a', 'b', 'c'], 'numbers': []})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'numbers'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'letters': ['a', 'b', 'c'], 'numbers': [1]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'numbers'</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'letters': ['a', 'b', 'c'], 'numbers': [1, 2, 3]})</span>
</code></pre></div>
<p>In this example, you create a Python <code>defaultdict</code> called <code>dd</code>, then you use <code>list</code> for its first argument. The second argument is called <code>letters</code> and holds a list of letters. You see that <code>.default_factory</code> now holds a <code>list</code> object that will be called when you need to supply a default <code>value</code> for any missing key.</p>
<p>Notice that when you try to access <code>numbers</code>, <code>dd</code> tests if <code>numbers</code> is in the dictionary. If it’s not, then it calls <code>.default_factory()</code>. Since <code>.default_factory</code> holds a <code>list</code> object, the returned <code>value</code> is an empty list (<code>[]</code>).</p>
<p>Now that <code>dd['numbers']</code> is initialized with an empty <code>list</code>, you can use <code>.append()</code> to add elements to the <code>list</code>. You can also use an augmented assignment operator (<code>+=</code>) to concatenate the lists <code>[1]</code> and <code>[2, 3]</code>. This way, you can handle missing keys in a more Pythonic and more efficient way.</p>
<p>On the other hand, if you pass a <strong>non-callable</strong> object to the initializer of the Python <code>defaultdict</code> type, then you’ll get a <code>TypeError</code> like in the following code:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">defaultdict</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">"&lt;stdin&gt;"</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="n">defaultdict</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">TypeError</span>: <span class="n">first argument must be callable or None</span>
</code></pre></div>
<p>Here, you pass <code>0</code> to <code>.default_factory</code>. Since <code>0</code> is not a callable object, you get a <code>TypeError</code> telling you that the first argument must be callable or <code>None</code>. Otherwise, <code>defaultdict</code> doesn’t work.</p>
<p>Keep in mind that <code>.default_factory</code> is only called from <a href="https://docs.python.org/3/reference/datamodel.html#object.__getitem__"><code>.__getitem__()</code></a> and not from other methods. This means that if <code>dd</code> is a <code>defaultdict</code> and <code>key</code> is a missing key, then <code>dd[key]</code> will call <code>.default_factory</code> to provide a default <code>value</code>, but <code>dd.get(key)</code> still returns <code>None</code> instead of the value that <code>.default_factory</code> would provide. That’s because <code>.get()</code> doesn’t call <code>.__getitem__()</code> to retrieve the <code>key</code>.</p>
<p>Take a look at the following code:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Calls dd.__getitem__('missing')</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'missing'</span><span class="p">]</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Don't call dd.__getitem__('another_missing')</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dd</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'another_missing'</span><span class="p">))</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'missing': []})</span>
</code></pre></div>
<p>In this code fragment, you can see that <code>dd.get()</code> returns <code>None</code> rather than the default value that <code>.default_factory</code> would provide. That’s because <code>.default_factory</code> is only called from <code>.__missing__()</code>, which is not called by <code>.get()</code>.</p>
<p>Notice that you can also add <strong>arbitrary values</strong> to a Python <code>defaultdict</code>. This means that you’re not limited to values with the same type as the values generated by <code>.default_factory</code>. Here’s an example:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'string'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'some string'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'string': 'some string'})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'list'</span><span class="p">]</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'string': 'some string', 'list': []})</span>
</code></pre></div>
<p>Here, you create a <code>defaultdict</code> and pass in a <code>list</code> object to <code>.default_factory</code>. This sets your default values to be empty lists. However, you can freely add a new key that holds values of a different type. That’s the case with the key <code>string</code>, which holds a <code>str</code> object instead of a <code>list</code> object.</p>
<p>Finally, you can always <strong>change or update the callable</strong> you initially assign to <code>.default_factory</code> in the same way you would do with any instance attribute:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="o">.</span><span class="n">default_factory</span> <span class="o">=</span> <span class="nb">str</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'missing_key'</span><span class="p">]</span>
<span class="go">''</span>
</code></pre></div>
<p>In the above code, you change <code>.default_factory</code> from <code>list</code> to <code>str</code>. Now, whenever you try to get access to a missing key, your default value will be an empty string (<code>''</code>).</p>
<p>Depending on your use cases for the Python <code>defaultdict</code> type, you might need to freeze the dictionary once you finish creating it and make it read-only. To do this, you can set <code>.default_factory</code> to <code>None</code> after you finish populating the dictionary. This way, your dictionary will behave like a standard <code>dict</code>, which means you won’t have more automatically generated default values.</p>
<div class="w-100 text-center js-needs-scaling" style="transform-origin: 0 0;"><div id="waldo-tag-5004" data-processed="true" data-google-query-id="COKa0rqcmugCFcMJvQodJacFdA"><div id="google_ads_iframe_/124067137/realpython728x90FS_5_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/124067137/realpython728x90FS_5_0" title="3rd party ad content" name="google_ads_iframe_/124067137/realpython728x90FS_5_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="6" data-load-complete="true" src="./深入探讨defaultdict和dict的区别_files/saved_resource(3).html"></iframe></div></div> <a class="small text-muted js-disclosure" href="https://realpython.com/account/join/" rel="nofollow" style=""> <i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><h3 id="defaultdict-vs-dictsetdefault"><code>defaultdict</code> vs <code>dict.setdefault()</code></h3>
<p>As you saw before, <code>dict</code> provides <code>.setdefault()</code>, which will allow you to assign values to missing keys on the fly. In contrast, with a <code>defaultdict</code> you can specify the default value up front when you initialize the container. You can use <code>.setdefault()</code> to assign default values as follows:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">'missing_key'</span><span class="p">,</span> <span class="p">[])</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{'missing_key': []}</span>
</code></pre></div>
<p>In this code, you create a regular dictionary and then use <code>.setdefault()</code> to assign a value (<code>[]</code>) to the key <code>missing_key</code>, which wasn’t defined yet.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> You can assign any type of Python object using <code>.setdefault()</code>. This is an important difference compared to <code>defaultdict</code> if you consider that <code>defaultdict</code> only accepts a callable or <code>None</code>.</p>
</div>
<p>On the other hand, if you use a <code>defaultdict</code> to accomplish the same task, then the default value is generated on demand whenever you try to access or modify a missing key. Notice that, with <code>defaultdict</code>, the default value is generated by the callable you pass upfront to the initializer of the class. Here’s how it works:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="p">[</span><span class="s1">'missing_key'</span><span class="p">]</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span>
<span class="go">defaultdict(&lt;class 'list'&gt;, {'missing_key': []})</span>
</code></pre></div>
<p>Here, you first import the Python <code>defaultdict</code> type from <code>collections</code>. Then, you create a <code>defaultdict</code> and pass <code>list</code> to <code>.default_factory</code>. When you try to get access to a missing key, <code>defaultdict</code> internally calls <code>.default_factory()</code>, which holds a reference to <code>list</code>, and assigns the resulting value (an empty <code>list</code>) to <code>missing_key</code>.</p>
<p>The code in the above two examples does the same work, but the <code>defaultdict</code> version is arguably more readable, user-friendly, Pythonic, and straightforward.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> A call to a built-in type like <code>list</code>, <code>set</code>, <code>dict</code>, <code>str</code>, <code>int</code>, or <code>float</code> will return an empty object or zero for numeric types.</p>
<p>Take a look at the following code examples:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">()</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">set</span><span class="p">()</span>
<span class="go">set([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">()</span>
<span class="go">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">()</span>
<span class="go">''</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">float</span><span class="p">()</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="p">()</span>
<span class="go">0</span>
</code></pre></div>
<p>In this code, you call some built-in types with no arguments and get an empty object or zero for the numeric types.</p>
</div>
<p>Finally, using a <code>defaultdict</code> to handle missing keys can be faster than using <code>dict.setdefault()</code>. Take a look a the following example:</p>
<div class="highlight python"><pre><span></span><code><span class="c1"># Filename: exec_time.py</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">timeit</span> <span class="kn">import</span> <span class="n">timeit</span>

<span class="n">animals</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'cat'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">'rabbit'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">'cat'</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">'dog'</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s1">'dog'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="n">std_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">def_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">group_with_dict</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">animal</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">animals</span><span class="p">:</span>
        <span class="n">std_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">animal</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">std_dict</span>

<span class="k">def</span> <span class="nf">group_with_defaultdict</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">animal</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">animals</span><span class="p">:</span>
        <span class="n">def_dict</span><span class="p">[</span><span class="n">animal</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">def_dict</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'dict.setdefault() takes {timeit(group_with_dict)} seconds.'</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'defaultdict takes {timeit(group_with_defaultdict)} seconds.'</span><span class="p">)</span>
</code></pre></div>
<p>If you <a href="https://realpython.com/run-python-scripts/#how-to-run-python-scripts-using-the-command-line">run the script</a> from your system’s command line, then you’ll get something like this:</p>
<div class="highlight sh"><pre><span></span><code><span class="gp">$</span> python3 exec_time.py
<span class="go">dict.setdefault() takes 1.0281260240008123 seconds.</span>
<span class="go">defaultdict takes 0.6704721650003194 seconds.</span>
</code></pre></div>
<p>Here, you use <a href="https://docs.python.org/3/library/timeit.html#python-interface"><code>timeit.timeit()</code></a> to measure the execution time of <code>group_with_dict()</code> and <code>group_with_defaultdict()</code>. These functions perform equivalent actions, but the first uses <code>dict.setdefault()</code>, and the second uses a <code>defaultdict</code>. The time measure will depend on your current hardware, but you can see here that <code>defaultdict</code> is faster than <code>dict.setdefault()</code>. This difference can become more important as the dataset gets larger.</p>
<p>Additionally, you need to consider that creating a regular <code>dict</code> can be faster than creating a <code>defaultdict</code>. Take a look at this code:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">timeit</span> <span class="kn">import</span> <span class="n">timeit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'dict() takes {timeit(dict)} seconds.'</span><span class="p">)</span>
<span class="go">dict() takes 0.08921320698573254 seconds.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'defaultdict() takes {timeit(defaultdict)} seconds.'</span><span class="p">)</span>
<span class="go">defaultdict() takes 0.14101867799763568 seconds.</span>
</code></pre></div>
<p>This time, you use <code>timeit.timeit()</code> to measure the execution time of <code>dict</code> and <code>defaultdict</code> instantiation. Notice that creating a <code>dict</code> takes almost half the time of creating a <code>defaultdict</code>. This might not be a problem if you consider that, in real-world code, you normally instantiate <code>defaultdict</code> only once.</p>
<p>Also notice that, by default, <code>timeit.timeit()</code> will run your code a million times. That’s the reason for defining <code>std_dict</code> and <code>def_dict</code> out of the scope of <code>group_with_dict()</code> and <code>group_with_defaultdict()</code> in <code>exec_time.py</code>. Otherwise, the time measure will be affected by the instantiation time of <code>dict</code> and <code>defaultdict</code>.</p>
<p>At this point, you may have an idea of when to use a <code>defaultdict</code> rather than a regular <code>dict</code>. Here are three things to take into account:</p>
<ol>
<li>
<p><strong>If your code is heavily base on dictionaries</strong> and you’re dealing with missing keys all the time, then you should consider using a <code>defaultdict</code> rather than a regular <code>dict</code>.</p>
</li>
<li>
<p><strong>If your dictionary items need to be initialized</strong> with a constant default value, then you should consider using a <code>defaultdict</code> instead of a <code>dict</code>.</p>
</li>
<li>
<p><strong>If your code relies on dictionaries</strong> for aggregating, accumulating, counting, or grouping values, and performance is a concern, then you should consider using a <code>defaultdict</code>.</p>
</li>
</ol>
<p>You can consider the above guidelines when deciding whether to use a <code>dict</code> or a <code>defaultdict</code>.</p>
<div class="w-100 text-center js-needs-scaling" style="transform-origin: 0 0;"><div id="waldo-tag-5257" data-processed="true" data-google-query-id="CIrw1dydmugCFdBiYAod83ACog"><div id="google_ads_iframe_/124067137/realpython728x90FS_6_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/124067137/realpython728x90FS_6_0" title="3rd party ad content" name="google_ads_iframe_/124067137/realpython728x90FS_6_0" width="480" height="320" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" srcdoc="" style="border: 0px; vertical-align: bottom;" data-google-container-id="7" data-load-complete="true"></iframe></div></div> <a class="small text-muted js-disclosure" href="https://realpython.com/account/join/" rel="nofollow" style=""> <i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><h3 id="defaultdict__missing__"><code>defaultdict.__missing__()</code></h3>
<p>Behind the scenes, the Python <code>defaultdict</code> type works by calling <code>.default_factory</code> to supply default values to missing keys. The mechanism that makes this possible is <code>.__missing__()</code>, a special method supported by all the standard mapping types, including <code>dict</code> and <code>defaultdict</code>.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> Note that <code>.__missing__()</code> is automatically called by <code>.__getitem__()</code> to handle missing keys and that <code>.__getitem__()</code> is automatically called by Python at the same time for <a href="https://docs.python.org/3/reference/expressions.html#subscriptions">subscription operations</a> like <code>d[key]</code>.</p>
</div>
<p>So, how does <code>.__missing__()</code> work? If you set <code>.default_factory</code> to <code>None</code>, then <code>.__missing__()</code> raises a <code>KeyError</code> with the <code>key</code> as an argument. Otherwise, <code>.default_factory</code> is called without arguments to provide a default <code>value</code> for the given <code>key</code>. This <code>value</code> is inserted into the dictionary and finally returned. If calling <code>.default_factory</code> raises an exception, then the exception is propagated unchanged.</p>
<p>The following code shows a viable Python implementation for <code>.__missing__()</code>:</p>
<div class="highlight python"><pre><span></span><code><span class="lineno"> 1 </span><span class="k">def</span> <span class="fm">__missing__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="lineno"> 2 </span>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_factory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="lineno"> 3 </span>        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="lineno"> 4 </span>    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
<span class="lineno"> 5 </span>        <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_factory</span><span class="p">()</span>
<span class="lineno"> 6 </span>    <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</code></pre></div>
<p>Here’s what this code does:</p>
<ul>
<li><strong>In line 1</strong>, you define the method and its signature.</li>
<li><strong>In lines 2 and 3</strong>, you test to see if <code>.default_factory</code> is <code>None</code>. If so, then you raise a <code>KeyError</code> with the <code>key</code> as an argument.</li>
<li><strong>In lines 4 and 5</strong>, you check if the <code>key</code> is not in the dictionary. If it’s not, then you call <code>.default_factory</code> and assign its return value to the <code>key</code>.</li>
<li><strong>In line 6</strong>, you return the <code>key</code> as expected.</li>
</ul>
<p>Keep in mind that the presence of <code>.__missing__()</code> in a mapping has no effect on the behavior of other methods that look up keys, such as <code>.get()</code> or <code>.__contains__()</code>, which implements the <code>in</code> operator. That’s because <code>.__missing__()</code> is only called by <code>.__getitem__()</code> when the requested <code>key</code> is not found in the dictionary. Whatever <code>.__missing__()</code> returns or raises is then returned or raised by <code>.__getitem__()</code>.</p>
<p>Now that you’ve covered an alternative Python implementation for <code>.__missing__()</code>, it would be a good exercise to try to emulate <code>defaultdict</code> with some Python code. That’s what you’ll be doing in the next section.</p>
<h2 id="emulating-the-python-defaultdict-type">Emulating the Python <code>defaultdict</code> Type</h2>
<p>In this section, you’ll be coding a Python class that will behave much like a <code>defaultdict</code>. To do that, you’ll subclass <a href="https://docs.python.org/3/library/collections.html#collections.UserDict"><code>collections.UserDict</code></a> and then add <code>.__missing__()</code>. Also, you need to add an instance attribute called <code>.default_factory</code>, which will hold the callable for generating default values on demand. Here’s a piece of code that emulates most of the behavior of the Python <code>defaultdict</code> type:</p>
<div class="highlight python"><pre><span></span><code><span class="lineno"> 1 </span><span class="kn">import</span> <span class="nn">collections</span>
<span class="lineno"> 2 </span>
<span class="lineno"> 3 </span><span class="k">class</span> <span class="nc">my_defaultdict</span><span class="p">(</span><span class="n">collections</span><span class="o">.</span><span class="n">UserDict</span><span class="p">):</span>
<span class="lineno"> 4 </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="lineno"> 5 </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="lineno"> 6 </span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">default_factory</span><span class="p">)</span> <span class="ow">and</span> <span class="n">default_factory</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="lineno"> 7 </span>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'first argument must be callable or None'</span><span class="p">)</span>
<span class="lineno"> 8 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">default_factory</span> <span class="o">=</span> <span class="n">default_factory</span>
<span class="lineno"> 9 </span>
<span class="lineno">10 </span>    <span class="k">def</span> <span class="fm">__missing__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="lineno">11 </span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_factory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="lineno">12 </span>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="lineno">13 </span>        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
<span class="lineno">14 </span>            <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_factory</span><span class="p">()</span>
<span class="lineno">15 </span>        <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</code></pre></div>
<p>Here’s how this code works:</p>
<ul>
<li>
<p><strong>In line 1</strong>, you import <code>collections</code> to get access to <code>UserDict</code>.</p>
</li>
<li>
<p><strong>In line 3</strong>, you create a class that subclasses <code>UserDict</code>.</p>
</li>
<li>
<p><strong>In line 4</strong>, you define the class initializer <code>.__init__()</code>. This method takes an argument called <code>default_factory</code> to hold the callable that you’ll use to generate the default values. Notice that <code>default_factory</code> defaults to <code>None</code>, just like in a <code>defaultdict</code>. You also need the <a href="https://realpython.com/python-kwargs-and-args/"><code>*args</code> and <code>**kwargs</code></a> for emulating the normal behavior of a regular <code>dict</code>.</p>
</li>
<li>
<p><strong>In line 5</strong>, you call the superclass <code>.__init__()</code>. This means that you’re calling <code>UserDict.__init__()</code> and passing <code>*args</code> and <code>**kwargs</code> to it.</p>
</li>
<li>
<p><strong>In line 6</strong>, you first check if <code>default_factory</code> is a valid callable object. In this case, you use <a href="https://docs.python.org/3/library/functions.html#callable"><code>callable(object)</code></a>, which is a built-in function that returns <code>True</code> if <code>object</code> appears to be a callable and otherwise returns <code>False</code>. This check ensures that you can call <code>.default_factory()</code> if you need to generate a default <code>value</code> for any missing <code>key</code>. Then, you check if <code>.default_factory</code> is not <code>None</code>.</p>
</li>
<li>
<p><strong>In line 7</strong>, you raise a <code>TypeError</code> just like a regular <code>dict</code> would do if <code>default_factory</code> is <code>None</code>.</p>
</li>
<li>
<p><strong>In line 8</strong>, you initialize <code>.default_factory</code>.</p>
</li>
<li>
<p><strong>In line 10</strong>, you define <code>.__missing__()</code>, which is implemented as you saw before. Recall that <code>.__missing__()</code> is automatically called by <code>.__getitem__()</code> when a given <code>key</code> is not in a dictionary.</p>
</li>
</ul>
<p>If you feel in the mood to read some <a href="https://realpython.com/build-python-c-extension-module/">C</a> code, then you can take a look at the <a href="https://github.com/python/cpython/blob/master/Modules/_collectionsmodule.c">full code</a> for the Python <code>defaultdict</code> Type in the <a href="https://realpython.com/cpython-source-code-guide/">CPython source code</a>.</p>
<p>Now that you’ve finished coding this class, you can test it by putting the code into a Python script called <code>my_dd.py</code> and importing it from an interactive session. Here’s an example:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">my_dd</span> <span class="kn">import</span> <span class="n">my_defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_one</span> <span class="o">=</span> <span class="n">my_defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_one</span>
<span class="go">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_one</span><span class="p">[</span><span class="s1">'missing'</span><span class="p">]</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_one</span>
<span class="go">{'missing': []}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_one</span><span class="o">.</span><span class="n">default_factory</span> <span class="o">=</span> <span class="nb">int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_one</span><span class="p">[</span><span class="s1">'another_missing'</span><span class="p">]</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_one</span>
<span class="go">{'missing': [], 'another_missing': 0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_two</span> <span class="o">=</span> <span class="n">my_defaultdict</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dd_two</span><span class="p">[</span><span class="s1">'missing'</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">"&lt;stdin&gt;"</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="n">dd_two</span><span class="p">[</span><span class="s1">'missing'</span><span class="p">]</span>
<span class="gr">  File "/home/user/my_dd.py", line 10,</span>
<span class="gr"> in __missing__</span>
<span class="gr">    raise KeyError(key)</span>
<span class="gr">KeyError</span>: <span class="n">'missing'</span>
</code></pre></div>
<p>Here, you first import <code>my_defaultdict</code> from <code>my_dd</code>. Then, you create an instance of <code>my_defaultdict</code> and pass <code>list</code> to <code>.default_factory</code>. If you try to get access to a key with a subscription operation, like <code>dd_one['missing']</code>, then <code>.__getitem__()</code> is automatically called by Python. If the key is not in the dictionary, then <code>.__missing__()</code> is called, which generates a default value by calling <code>.default_factory()</code>.</p>
<p>You can also change the callable assigned to <code>.default_factory</code> using a normal assignment operation like in <code>dd_one.default_factory = int</code>. Finally, if you pass <code>None</code> to <code>.default_factory</code>, then you’ll get a <code>KeyError</code> when trying to retrieve a missing key.</p>
<div class="alert alert-primary" role="alert">
<p><strong>Note:</strong> The behavior of a <code>defaultdict</code> is essentially the same as this Python equivalent. However, you’ll soon note that your Python implementation doesn’t print as a real <code>defaultdict</code> but as a standard <code>dict</code>. You can modify this detail by overriding <code>.__str__()</code> and <code>.__repr__()</code>.</p>
</div>
<p>You may be wondering why you subclass <code>collections.UserDict</code> instead of a regular <code>dict</code> for this example. The main reason for this is that subclassing built-in types can be error-prone because the C code of the built-ins doesn’t seem to consistently call special methods overridden by the user.</p>
<p>Here’s an example that shows some issues that you can face when subclassing <code>dict</code>:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span> <span class="o">=</span> <span class="n">MyDict</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span>
<span class="go">{'first': 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span><span class="p">[</span><span class="s1">'second'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span>
<span class="go">{'first': 1, 'second': None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">'third'</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span>
<span class="go">{'first': 1, 'second': None, 'third': 3}</span>
</code></pre></div>
<p>In this example, you create <code>MyDict</code>, which is a class that subclasses <code>dict</code>. Your implementation of <a href="https://docs.python.org/3/reference/datamodel.html#object.__setitem__"><code>.__setitem__()</code></a> always sets values to <code>None</code>. If you create an instance of <code>MyDict</code> and pass a keyword argument to its initializer, then you’ll notice the class is not calling your <code>.__setitem__()</code> to handle the assignment. You know that because the key <code>first</code> wasn’t assigned <code>None</code>.</p>
<p>By contrast, if you run a subscription operation like <code>my_dict['second'] = 2</code>, then you’ll notice that <code>second</code> is set to <code>None</code> rather than to <code>2</code>. So, this time you can say that subscription operations call your custom <code>.__setitem__()</code>. Finally, notice that <code>.setdefault()</code> doesn’t call <code>.__setitem__()</code> either, because your <code>third</code> key ends up with a value of <code>3</code>.</p>
<p><strong><code>UserDict</code></strong> doesn’t inherit from <code>dict</code> but simulates the behavior of a standard dictionary. The class has an internal <code>dict</code> instance called <code>.data</code>, which is used to store the content of the dictionary. <code>UserDict</code> is a more reliable class when it comes to creating <strong>custom mappings</strong>. If you use <code>UserDict</code>, then you’ll be avoiding the issues you saw before. To prove this, go back to the code for <code>my_defaultdict</code> and add the following method:</p>
<div class="highlight python"><pre><span></span><code><span class="lineno"> 1 </span><span class="k">class</span> <span class="nc">my_defaultdict</span><span class="p">(</span><span class="n">collections</span><span class="o">.</span><span class="n">UserDict</span><span class="p">):</span>
<span class="lineno"> 2 </span>    <span class="c1"># Snip</span>
<span class="lineno"> 3 </span><span class="hll">    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span class="lineno"> 4 </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">'__setitem__() gets called'</span><span class="p">)</span>
<span class="lineno"> 5 </span><span class="hll">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></code></pre></div>
<p>Here, you add a custom <code>.__setitem__()</code> that calls the superclass <code>.__setitem__()</code>, which always sets the value to <code>None</code>. Update this code in your script <code>my_dd.py</code> and import it from an interactive session as follows:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">my_dd</span> <span class="kn">import</span> <span class="n">my_defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span> <span class="o">=</span> <span class="n">my_defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">__setitem__() gets called</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span>
<span class="go">{'first': None}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span><span class="p">[</span><span class="s1">'second'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="go">__setitem__() gets called</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_dict</span>
<span class="go">{'first': None, 'second': None}</span>
</code></pre></div>
<p>In this case, when you instantiate <code>my_defaultdict</code> and pass <code>first</code> to the class initializer, your custom <code>__setitem__()</code> gets called. Also, when you assign a value to the key <code>second</code>, <code>__setitem__()</code> gets called as well. You now have a <code>my_defaultdict</code> that consistently calls your custom special methods. Notice that all the values in the dictionary are equal to <code>None</code> now.</p>
<div class="w-100 text-center js-needs-scaling" style="transform-origin: 0 0;"><div id="waldo-tag-5259" data-processed="true" data-google-query-id="CJ7R_JGemugCFZmxlgodMlcAyQ"><div id="google_ads_iframe_/124067137/realpython728x90FS_7_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/124067137/realpython728x90FS_7_0" title="3rd party ad content" name="google_ads_iframe_/124067137/realpython728x90FS_7_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" srcdoc="" style="border: 0px; vertical-align: bottom;" data-google-container-id="8" data-load-complete="true"></iframe></div></div> <a class="small text-muted js-disclosure" href="https://realpython.com/account/join/" rel="nofollow" style=""> <i aria-hidden="true" class="fa fa-info-circle"> </i> Remove ads</a></div><h2 id="passing-arguments-to-default_factory">Passing Arguments to <code>.default_factory</code></h2>
<p>As you saw earlier, <code>.default_factory</code> must be set to a callable object that takes no argument and returns a value. This value will be used to supply a default value for any missing key in the dictionary. Even when <code>.default_factory</code> shouldn’t take arguments, Python offers some tricks that you can use if you need to supply arguments to it. In this section, you’ll cover two Python tools that can serve this purpose:</p>
<ol>
<li><a href="https://realpython.com/python-lambda/"><code>lambda</code></a></li>
<li><a href="https://docs.python.org/3/library/functools.html#functools.partial"><code>functools.partial()</code></a></li>
</ol>
<p>With these two tools, you can add extra flexibility to the Python <code>defaultdict</code> type. For example, you can initialize a <code>defaultdict</code> with a callable that takes an argument and, after some processing, you can update the callable with a new argument to change the default value for the keys you’ll create from this point on.</p>
<h3 id="using-lambda">Using <code>lambda</code></h3>
<p>A flexible way to pass arguments to <code>.default_factory</code> is to use <strong><code>lambda</code></strong>. Suppose you want to create a function to generate default values in a <code>defaultdict</code>. The function does some processing and returns a value, but you need to pass an argument for the function to work correctly. Here’s an example:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">factory</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># Do some processing here...</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">result</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">factory</span><span class="p">(</span><span class="s1">'default value'</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="p">[</span><span class="s1">'missing'</span><span class="p">]</span>
<span class="go">'DEFAULT VALUE'</span>
</code></pre></div>
<p>In the above code, you create a function called <code>factory()</code>. The function takes an argument, does some processing, and returns the final result. Then, you create a <code>defaultdict</code> and use <code>lambda</code> to pass the string <code>'default value'</code> to <code>factory()</code>. When you try to get access to a missing key, the following steps are run:</p>
<ol>
<li><strong>The dictionary <code>def_dict</code></strong> calls its <code>.default_factory</code>, which holds a reference to a <code>lambda</code> function.</li>
<li><strong>The <code>lambda</code> function</strong> gets called and returns the value that results from calling <code>factory()</code> with <code>'default value'</code> as an argument.</li>
</ol>
<p>If you’re working with <code>def_dict</code> and suddenly need to change the argument to <code>factory()</code>, then you can do something like this:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="o">.</span><span class="n">default_factory</span> <span class="o">=</span> <span class="n">factory</span><span class="p">(</span><span class="s1">'another default value'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="p">[</span><span class="s1">'another_missing'</span><span class="p">]</span>
<span class="go">'ANOTHER DEFAULT VALUE'</span>
</code></pre></div>
<p>This time, <code>factory()</code> takes a new string argument (<code>'another default value'</code>). From now on, if you try to access or modify a missing key, then you’ll get a new default value, which is the string <code>'ANOTHER DEFAULT VALUE'</code>.</p>
<p>Finally, you can possibly face a situation where you need a default value that’s different from <code>0</code> or <code>[]</code>. In this case, you can also use <code>lambda</code> to <strong>generate a different default value</strong>. For example, suppose you have a <code>list</code> of integer numbers, and you need to calculate the cumulative product of each number. Then, you can use a <code>defaultdict</code> along with <code>lambda</code> as follows:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">def_dict</span><span class="p">[</span><span class="n">number</span><span class="p">]</span> <span class="o">*=</span> <span class="n">number</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span>
<span class="go">defaultdict(&lt;function &lt;lambda&gt; at 0x...70&gt;, {1: 1, 2: 8, 3: 27, 4: 64})</span>
</code></pre></div>
<p>Here, you use <code>lambda</code> to supply a default value of <code>1</code>. With this initial value, you can calculate the cumulative product of each number in <code>lst</code>. Notice that you can’t get the same result using <code>int</code> because the default value returned by <code>int</code> is always <code>0</code>, which is not a good initial value for the multiplication operations you need to perform here.</p>
<h3 id="using-functoolspartial">Using <code>functools.partial()</code></h3>
<p><a href="https://docs.python.org/3/library/functools.html#functools.partial"><code>functools.partial(func, *args, **keywords)</code></a> is a function that returns a <code>partial</code> object. When you call this object with the positional arguments (<code>args</code>) and keyword arguments (<code>keywords</code>), it behaves similar to when you call <code>func(*args, **keywords)</code>. You can take advantage of this behavior of <code>partial()</code> and use it to pass arguments to <code>.default_factory</code> in a Python <code>defaultdict</code>. Here’s an example:</p>
<div class="highlight python repl"><span class="repl-toggle" title="Toggle REPL prompts and output">&gt;&gt;&gt;</span><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">factory</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># Do some processing here...</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">result</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="n">factory</span><span class="p">,</span> <span class="s1">'default value'</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="p">[</span><span class="s1">'missing'</span><span class="p">]</span>
<span class="go">'DEFAULT VALUE'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="o">.</span><span class="n">default_factory</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">factory</span><span class="p">,</span> <span class="s1">'another default value'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">def_dict</span><span class="p">[</span><span class="s1">'another_missing'</span><span class="p">]</span>
<span class="go">'ANOTHER DEFAULT VALUE'</span>
</code></pre></div>
<p>Here, you create a Python <code>defaultdict</code> and use <code>partial()</code> to supply an argument to <code>.default_factory</code>. Notice that you can also update <code>.default_factory</code> to use another argument for the callable <code>factory()</code>. This kind of behavior can add a lot of flexibility to your <code>defaultdict</code> objects.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The Python <code>defaultdict</code> type is a dictionary-like data structure provided by the Python standard library in a module called <code>collections</code>. The class inherits from <code>dict</code>, and its main added functionality is to supply default values for missing keys. In this tutorial, you’ve learned how to use the Python <code>defaultdict</code> type for handling the missing keys in a dictionary.</p>
<p><strong>You’re now able to:</strong></p>
<ul>
<li><strong>Create and use</strong> a Python <code>defaultdict</code> to handle missing keys</li>
<li><strong>Solve</strong> real-world problems related to grouping, counting, and accumulating operations</li>
<li><strong>Know</strong> the implementation differences between <code>defaultdict</code> and <code>dict</code></li>
<li><strong>Decide</strong> when and why to use a Python <code>defaultdict</code> rather than a standard <code>dict</code></li>
</ul>
<p>The Python <code>defaultdict</code> type is a convenient and efficient data structure that’s designed to help you out when you’re dealing with missing keys in a dictionary. Give it a try and make your code faster, more readable, and more Pythonic!</p>
</div>
<div class="card mt-4 mb-4 bg-secondary">
<p class="card-header h3 text-center bg-light">🐍 Python Tricks 💌</p>
<div class="card-body">
<div class="container">
<div class="row">
<div class="col-xs-12 col-sm-7">
<p>Get a short &amp; sweet <strong>Python Trick</strong> delivered to your inbox every couple of days. No spam ever. Unsubscribe any time. Curated by the Real Python team.</p>
</div>
<div class="col-xs-12 col-sm-5">
<img class="img-fluid rounded mb-3" src="./深入探讨defaultdict和dict的区别_files/pytrick-dict-merge.4201a0125a5e.png" width="738" height="490" alt="Python Tricks Dictionary Merge">
</div>
</div>
<div class="row mb-3">
<form class="col-12" action="https://realpython.com/optins/process/" method="post">
<input type="hidden" name="csrfmiddlewaretoken" value="izYFK7xzjyxNgCwvbN0w3kTce3QKnlN55VInTX6FA9hMVvoMKunG2bRI7paaiynZ">
<input type="hidden" name="slug" value="static-python-tricks-footer">
<div class="form-group">
<input name="email" type="email" class="form-control form-control-lg" placeholder="Email Address" required="">
</div>
<button name="submit" type="submit" class="btn btn-primary btn-lg btn-block">Send Me Python Tricks »</button>
</form>
</div>
</div>
</div>
</div>
<div class="card mt-3" id="author">
<p class="card-header h3">About <strong>Leodanis Pozo Ramos</strong></p>
<div class="card-body">
<div class="container">
<div class="row">
<div class="col-12 col-md-3 align-self-center">
<a href="https://realpython.com/team/lpozoramos/"><img loading="lazy" src="./深入探讨defaultdict和dict的区别_files/Perfil_final1.9f896bc212f6.jpg" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=215&amp;sig=070f519b6e082810fd9e262e99da99a54997b44e 215w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg&amp;w=431&amp;sig=65eee68148810972e5b4ca2899a8fe5a3f80d47a 431w, https://files.realpython.com/media/Perfil_final1.9f896bc212f6.jpg 862w" class="rounded-circle img-fluid w-100 mb-0" alt="Leodanis Pozo Ramos" sizes="25vw"></a>
</div>
<div class="col mt-3">
<p>Leodanis is an industrial engineer who loves Python and software development. He is a self-taught Python programmer with 5+ years of experience building desktop applications.</p>
 <a href="https://realpython.com/team/lpozoramos/" class="card-link">» More about Leodanis</a>
</div>
</div>
</div>
</div>
<hr class="my-0">
<div class="card-body pb-0">
<div class="container">
<div class="row">
<p><em>Each tutorial at Real Python is created by a team of developers so that it meets our high quality standards. The team members who worked on this tutorial are:</em></p>
</div>
<div class="row align-items-center w-100 mx-auto">
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/asantos/"><img loading="lazy" src="./深入探讨defaultdict和dict的区别_files/asantos-avatar.888c78fffab3.jpg" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=175&amp;sig=a095ca193d3f40e73e6921403c1c43e48c9a4bdc 175w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/asantos-avatar.888c78fffab3.jpg&amp;w=350&amp;sig=28c0dc29376daf4ca29d5f47b3708b873c21af76 350w, https://files.realpython.com/media/asantos-avatar.888c78fffab3.jpg 700w" sizes="10vw" class="rounded-circle img-fluid w-100" alt="Aldren Santos"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/asantos/" class="card-link"><p>Aldren</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/bweber/"><img loading="lazy" src="./深入探讨defaultdict和dict的区别_files/BryanWeber-square.789781f1e92c.jpg" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/BryanWeber-square.789781f1e92c.jpg&amp;w=250&amp;sig=e6065e9cbaddcc75687b67060d108df805cf34f6 250w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/BryanWeber-square.789781f1e92c.jpg&amp;w=500&amp;sig=f78cc5809fae1a854e0e9c069a17bdbcdf931a0f 500w, https://files.realpython.com/media/BryanWeber-square.789781f1e92c.jpg 1000w" sizes="10vw" class="rounded-circle img-fluid w-100" alt="Bryan Weber"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/bweber/" class="card-link"><p>Bryan</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/gahjelle/"><img loading="lazy" src="./深入探讨defaultdict和dict的区别_files/gahjelle.470149ee709e.jpg" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/gahjelle.470149ee709e.jpg&amp;w=200&amp;sig=5f5c996c1ae71bd7f2f89f547a334d508de2f4bb 200w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/gahjelle.470149ee709e.jpg&amp;w=400&amp;sig=0e74ccf912d97528bda85e7b9e9e5064d69a1169 400w, https://files.realpython.com/media/gahjelle.470149ee709e.jpg 800w" sizes="10vw" class="rounded-circle img-fluid w-100" alt="Geir Arne Hjelle"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/gahjelle/" class="card-link"><p>Geir Arne</p></a>
</div>
</div>
<div class="row align-items-center w-100 mx-auto">
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/jayazhane/"><img loading="lazy" src="./深入探讨defaultdict和dict的区别_files/author-jpowell.ecce5da51b65.jpg" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/author-jpowell.ecce5da51b65.jpg&amp;w=143&amp;sig=b95bfe83fd10d5bf43b3623122ff842fd8dd7574 143w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/author-jpowell.ecce5da51b65.jpg&amp;w=286&amp;sig=ac2be4e646abc20329b882f6389b5e570965609f 286w, https://files.realpython.com/media/author-jpowell.ecce5da51b65.jpg 572w" sizes="10vw" class="rounded-circle img-fluid w-100" alt="Jaya Zhané"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/jayazhane/" class="card-link"><p>Jaya</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center">
<a href="https://realpython.com/team/jjablonski/"><img loading="lazy" src="./深入探讨defaultdict和dict的区别_files/jjablonksi-avatar.e37c4f83308e.jpg" srcset="https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=200&amp;sig=d779dbceba743afb659648000525a6a71656ae98 200w, https://robocrop.realpython.net/?url=https%3A//files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg&amp;w=400&amp;sig=99ce401a9a219f6b406309e90925252be1900dfc 400w, https://files.realpython.com/media/jjablonksi-avatar.e37c4f83308e.jpg 800w" sizes="10vw" class="rounded-circle img-fluid w-100" alt="Joanna Jablonski"></a>
</div>
<div class="col pl-0 d-none d-sm-block">
<a href="https://realpython.com/team/jjablonski/" class="card-link"><p>Joanna</p></a>
</div>
<div class="col-4 col-sm-2 align-self-center"></div>
<div class="col pl-0 d-none d-sm-block"></div>
</div>
</div>
</div>
</div>
<div class="sidebar-module sidebar-module-inset p-0 my-4" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:25%;"></div>
<div class="rpad" data-unit="4x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/35017505416/?c=37384875857&amp;p=58946116052&amp;r=13273" rel="nofollow" target="_blank"><img src="./深入探讨defaultdict和dict的区别_files/0fc9b00486dcc3d778445659b069cc10" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div>
</div>
</div>
<div class="card mt-4" id="reader-comments">
<p class="card-header h3">What Do You Think?</p>
<div class="text-center mt-3 mb-0 p-0">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check%20out%20this%20%23Python%20tutorial:%20Using%20the%20Python%20defaultdict%20Type%20for%20Handling%20Missing%20Keys%20by%20@realpython&amp;url=https%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python%20article%20for%20you&amp;body=Check%20out%20this%20Python%20tutorial:%0A%0AUsing%20the%20Python%20defaultdict%20Type%20for%20Handling%20Missing%20Keys%0A%0Ahttps%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
<div class="card-body">
<div class="alert alert-dark">
<p class="mb-0"><strong>Real Python Comment Policy:</strong> The most useful comments are those written with the goal of learning from or helping out other readers—after reading the whole article and all the earlier comments. Complaints and insults generally won’t make the cut here.</p>
</div>
<p>What’s your #1 takeaway or favorite thing you learned? How are you going to put your newfound skills to use? Leave a comment below and let us know.</p>
<div class="mb-4" id="disqus_thread">
</div>
</div>
</div>
<div class="card mt-4 mb-4">
<p class="card-header h3">Keep Learning</p>
<div class="card-body">
<p class="mb-0">Related Tutorial Categories:
<a href="https://realpython.com/tutorials/basics/" class="badge badge-light text-muted">basics</a>
<a href="https://realpython.com/tutorials/python/" class="badge badge-light text-muted">python</a>
</p>
</div>
</div>
<div class="modal fade" tabindex="-1" role="dialog" id="rpvc">
<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
<div class="modal-content">
<div class="modal-header border-0 mt-3">
<div class="col-12 modal-title text-center">
<h2 class="my-0 mx-5">Master <u>Real-World Python Skills</u> With Unlimited Access to Real Python</h2>
<p class="text-center text-muted mt-2 mb-1">Already a member? <a href="https://realpython.com/account/login/">Sign-In</a></p>
</div>
</div>
<div class="modal-body bg-light">
<div class="col-12 text-center">
<p class="mb-2 mt-3"><a href="https://realpython.com/account/join/?utm_source=rp&amp;utm_medium=web&amp;utm_campaign=pwn&amp;utm_content=v1"><img class="w-50 mb-2" src="./深入探讨defaultdict和dict的区别_files/lesson-locked.f5105cfd26db.svg"></a></p>
<p class="mx-auto w-66 mb-3"><strong>Join us and get access to hundreds of tutorials, hands-on video courses, and a community of expert Pythonistas:</strong></p>
<p><a href="https://realpython.com/account/join/?utm_source=rp&amp;utm_medium=web&amp;utm_campaign=pwn&amp;utm_content=v1" class="btn btn-primary btn-lg px-4">See Membership Options »</a>
</p></div>
</div>
<div class="modal-footer border-0">
<a href="https://realpython.com/python-defaultdict/#!" class="text-muted btn" data-dismiss="modal">Close</a>
</div>
</div>
</div>
</div>
</div>
<aside class="col-md-7 col-lg-4">
<div class="card mb-3 bg-secondary">
<form class="card-body" action="https://realpython.com/optins/process/" method="post">
<div class="form-group">
<p class="h5 text-muted text-center">— FREE Email Series —</p>
<p class="h3 text-center">🐍 Python Tricks 💌</p>
<p><img class="img-fluid rounded" src="./深入探讨defaultdict和dict的区别_files/pytrick-dict-merge.4201a0125a5e.png" width="738" height="490" alt="Python Tricks Dictionary Merge"></p>
</div>
<div class="form-group">
<input type="hidden" name="csrfmiddlewaretoken" value="izYFK7xzjyxNgCwvbN0w3kTce3QKnlN55VInTX6FA9hMVvoMKunG2bRI7paaiynZ">
<input type="hidden" name="slug" value="static-python-tricks-sidebar">
<input type="email" class="form-control form-control-md" name="email" placeholder="Email…" required="">
</div>
<button type="submit" name="submit" class="btn btn-primary btn-md btn-block">Get Python Tricks »</button>
<p class="mb-0 mt-2 text-muted text-center">🔒 No spam. Unsubscribe any time.</p>
</form>
</div>
<div class="sidebar-module sidebar-module-inset border">
<p class="h4"><a class="link-unstyled" href="https://realpython.com/tutorials/all/">All Tutorial Topics</a></p>
<a href="https://realpython.com/tutorials/advanced/" class="badge badge-light text-muted">advanced</a>
<a href="https://realpython.com/tutorials/api/" class="badge badge-light text-muted">api</a>
<a href="https://realpython.com/tutorials/basics/" class="badge badge-light text-muted">basics</a>
<a href="https://realpython.com/tutorials/best-practices/" class="badge badge-light text-muted">best-practices</a>
<a href="https://realpython.com/tutorials/community/" class="badge badge-light text-muted">community</a>
<a href="https://realpython.com/tutorials/databases/" class="badge badge-light text-muted">databases</a>
<a href="https://realpython.com/tutorials/data-science/" class="badge badge-light text-muted">data-science</a>
<a href="https://realpython.com/tutorials/devops/" class="badge badge-light text-muted">devops</a>
<a href="https://realpython.com/tutorials/django/" class="badge badge-light text-muted">django</a>
<a href="https://realpython.com/tutorials/docker/" class="badge badge-light text-muted">docker</a>
<a href="https://realpython.com/tutorials/flask/" class="badge badge-light text-muted">flask</a>
<a href="https://realpython.com/tutorials/front-end/" class="badge badge-light text-muted">front-end</a>
<a href="https://realpython.com/tutorials/intermediate/" class="badge badge-light text-muted">intermediate</a>
<a href="https://realpython.com/tutorials/machine-learning/" class="badge badge-light text-muted">machine-learning</a>
<a href="https://realpython.com/tutorials/python/" class="badge badge-light text-muted">python</a>
<a href="https://realpython.com/tutorials/testing/" class="badge badge-light text-muted">testing</a>
<a href="https://realpython.com/tutorials/tools/" class="badge badge-light text-muted">tools</a>
<a href="https://realpython.com/tutorials/web-dev/" class="badge badge-light text-muted">web-dev</a>
<a href="https://realpython.com/tutorials/web-scraping/" class="badge badge-light text-muted">web-scraping</a>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:100%;"></div>
<div class="rpad" data-unit="1x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/50092860242/?c=3539665479&amp;p=58946116052&amp;r=58958" rel="nofollow" target="_blank"><img src="./深入探讨defaultdict和dict的区别_files/7280dbf30745e8e6d77d111f8b3be9d2" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div>
</div>
</div>
<div class="sidebar-sticky">
<div class="sidebar-module sidebar-module-inset border">
<p class="h4"><a class="link-unstyled" href="https://realpython.com/python-defaultdict/#toc">Table of Contents</a></p>
<div class="toc">
<ul>
<li><a href="https://realpython.com/python-defaultdict/#handling-missing-keys-in-dictionaries">Handling Missing Keys in Dictionaries</a></li>
<li><a href="https://realpython.com/python-defaultdict/#understanding-the-python-defaultdict-type">Understanding the Python defaultdict Type</a></li>
<li><a href="https://realpython.com/python-defaultdict/#using-the-python-defaultdict-type">Using the Python defaultdict Type</a><ul>
<li><a href="https://realpython.com/python-defaultdict/#grouping-items">Grouping Items</a></li>
<li><a href="https://realpython.com/python-defaultdict/#grouping-unique-items">Grouping Unique Items</a></li>
<li><a href="https://realpython.com/python-defaultdict/#counting-items">Counting Items</a></li>
<li><a href="https://realpython.com/python-defaultdict/#accumulating-values">Accumulating Values</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-defaultdict/#diving-deeper-into-defaultdict">Diving Deeper Into defaultdict</a><ul>
<li><a href="https://realpython.com/python-defaultdict/#defaultdict-vs-dict">defaultdict vs dict</a></li>
<li><a href="https://realpython.com/python-defaultdict/#defaultdictdefault_factory">defaultdict.default_factory</a></li>
<li><a href="https://realpython.com/python-defaultdict/#defaultdict-vs-dictsetdefault">defaultdict vs dict.setdefault()</a></li>
<li><a href="https://realpython.com/python-defaultdict/#defaultdict__missing__">defaultdict.__missing__()</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-defaultdict/#emulating-the-python-defaultdict-type">Emulating the Python defaultdict Type</a></li>
<li><a href="https://realpython.com/python-defaultdict/#passing-arguments-to-default_factory">Passing Arguments to .default_factory</a><ul>
<li><a href="https://realpython.com/python-defaultdict/#using-lambda">Using lambda</a></li>
<li><a href="https://realpython.com/python-defaultdict/#using-functoolspartial">Using functools.partial()</a></li>
</ul>
</li>
<li><a href="https://realpython.com/python-defaultdict/#conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div class="sidebar-module sidebar-module-inset text-center my-3 py-0">
<span>
<a target="_blank" rel="nofollow" href="https://twitter.com/intent/tweet/?text=Check%20out%20this%20%23Python%20tutorial:%20Using%20the%20Python%20defaultdict%20Type%20for%20Handling%20Missing%20Keys%20by%20@realpython&amp;url=https%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-twitter text-light mb-1"><i class="mr-1 fa fa-twitter text-light"></i>Tweet</a>
<a target="_blank" rel="nofollow" href="https://facebook.com/sharer/sharer.php?u=https%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-facebook text-light mb-1"><i class="mr-1 fa fa-facebook text-light"></i>Share</a>
<a target="_blank" rel="nofollow" href="mailto:?subject=Python%20article%20for%20you&amp;body=Check%20out%20this%20Python%20tutorial:%0A%0AUsing%20the%20Python%20defaultdict%20Type%20for%20Handling%20Missing%20Keys%0A%0Ahttps%3A//realpython.com/python-defaultdict/" class="mr-1 badge badge-red text-light mb-1"><i class="mr-1 fa fa-envelope text-light"></i>Email</a>
</span>
</div>
<div class="sidebar-module sidebar-module-inset p-0" style="overflow:hidden;">
<div style="display:block;position:relative;">
<div style="display:block;width:100%;padding-top:25%;"></div>
<div class="rpad" data-unit="4x1" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;"><a href="https://srv.realpython.net/click/64754707389/?c=31941813441&amp;p=58946116052&amp;r=63806" rel="nofollow" target="_blank"><img src="./深入探讨defaultdict和dict的区别_files/257f65e32c1713399c59dacea36eb818" style="max-width: 100%; max-height: 100%; width: 100%;"></a></div>
</div>
</div>
</div>
</aside>
</div>
</div>
<div class="modal fade" id="modal-python-cheat-sheet-shortened" tabindex="-1" role="dialog" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
<div class="modal-content">
<div class="modal-header bg-light pt-3 pb-2">
<div class="container-fluid">
<div class="row">
<div class="col-12">
<div class="progress" style="height: .5rem;">
<div class="progress-bar progress-bar-striped progress-bar-animated w-50" role="progressbar"></div>
</div>
</div>
<div class="col-12">
<p class="text-muted text-center mb-0 mt-2">Almost there! Complete this form and click the button below to gain instant access:</p>
</div>
</div>
</div>
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
</div>
<div class="modal-body m-4">
<div class="container-fluid">
<div class="row align-items-center">
<div class="col-12 col-lg-4">
<img class="img-fluid rounded w-100 mb-4" src="./深入探讨defaultdict和dict的区别_files/python-logo.8eb72ea6927b.png">
</div>
<div class="col">
<p class="text-center h3 mb-4">Get the Python Cheat Sheet (Free PDF)</p>
<form class="col-12" action="https://realpython.com/optins/process/" method="post">
<input type="hidden" name="csrfmiddlewaretoken" value="izYFK7xzjyxNgCwvbN0w3kTce3QKnlN55VInTX6FA9hMVvoMKunG2bRI7paaiynZ">
<input type="hidden" name="slug" value="python-cheat-sheet-shortened">
<div class="form-group">
<input type="email" name="email" class="form-control" placeholder="Email Address" required="" autofocus="">
</div>
<button name="submit" type="submit" class="btn btn-primary btn-block text-wrap">Send My Python Cheat Sheet »</button>
</form>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<footer class="footer">
<div class="container">
<p class="text-center text-muted">© 2012–2020 Real Python ⋅ <a href="https://realpython.com/newsletter/">Newsletter</a> ⋅ <a href="https://www.youtube.com/realpython">YouTube</a> ⋅ <a href="https://twitter.com/realpython">Twitter</a> ⋅ <a href="https://facebook.com/LearnRealPython">Facebook</a> ⋅ <a href="https://www.instagram.com/realpython/">Instagram</a><br><a href="https://realpython.com/">Python Tutorials</a> ⋅ <a href="https://realpython.com/search">Search</a> ⋅ <a href="https://realpython.com/privacy-policy/">Privacy Policy</a> ⋅ <a href="https://realpython.com/energy-policy/" class="text-success active">Energy Policy</a> ⋅ <a href="https://realpython.com/sponsorships/">Advertise</a> ⋅ <a href="https://realpython.com/contact/">Contact</a><br>❤️ Happy Pythoning!</p>
</div>
</footer>
<script>
      (function(document, history, location) {
        var HISTORY_SUPPORT = !!(history && history.pushState);

        var anchorScrolls = {
          ANCHOR_REGEX: /^#[^ ]+$/,
          OFFSET_HEIGHT_PX: 120,

          /**
           * Establish events, and fix initial scroll position if a hash is provided.
           */
          init: function() {
            this.scrollToCurrent();
            window.addEventListener('hashchange', this.scrollToCurrent.bind(this));
            document.body.addEventListener('click', this.delegateAnchors.bind(this));
          },

          /**
           * Return the offset amount to deduct from the normal scroll position.
           * Modify as appropriate to allow for dynamic calculations
           */
          getFixedOffset: function() {
            return this.OFFSET_HEIGHT_PX;
          },

          /**
           * If the provided href is an anchor which resolves to an element on the
           * page, scroll to it.
           * @param  {String} href
           * @return {Boolean} - Was the href an anchor.
           */
          scrollIfAnchor: function(href, pushToHistory) {
            var match, rect, anchorOffset;

            if(!this.ANCHOR_REGEX.test(href)) {
              return false;
            }

            match = document.getElementById(href.slice(1));

            if(match) {
              rect = match.getBoundingClientRect();
              anchorOffset = window.pageYOffset + rect.top - this.getFixedOffset();
              window.scrollTo(window.pageXOffset, anchorOffset);

              // Add the state to history as-per normal anchor links
              if(HISTORY_SUPPORT && pushToHistory) {
                history.pushState({}, document.title, location.pathname + href);
              }
            }

            return !!match;
          },

          /**
           * Attempt to scroll to the current location's hash.
           */
          scrollToCurrent: function() {
            this.scrollIfAnchor(window.location.hash);
          },

          /**
           * If the click event's target was an anchor, fix the scroll position.
           */
          delegateAnchors: function(e) {
            var elem = e.target;

            if(
              elem.nodeName === 'A' &&
              this.scrollIfAnchor(elem.getAttribute('href'), true)
            ) {
              e.preventDefault();
            }
          }
        };

        window.addEventListener(
          'DOMContentLoaded', anchorScrolls.init.bind(anchorScrolls)
        );
      })(window.document, window.history, window.location);
    </script>
<script src="./深入探讨defaultdict和dict的区别_files/jquery.min.220afd743d9e.js.下载"></script>
<script src="./深入探讨defaultdict和dict的区别_files/popper.min.1022eaf388cc.js.下载"></script>
<script src="./深入探讨defaultdict和dict的区别_files/bootstrap.min.61f338f870fc.js.下载"></script>
<script src="./深入探讨defaultdict和dict的区别_files/repl-toggle.366cb6d72340.js.下载"></script>
<script>window.rp_prop_id = '58946116052';</script>
<script src="./深入探讨defaultdict和dict的区别_files/tag.js.下载" async=""></script>
<script src="./深入探讨defaultdict和dict的区别_files/2153.js.下载"></script>
<script>
  (function() {
    function throttle(a, b) { var c, d; return function () { var e = this, f = arguments, g = +new Date; c && g < c + a ? (clearTimeout(d), d = setTimeout(function () { c = g, b.apply(e, f) }, a)) : (c = g, b.apply(e, f)) } }
    var elems = document.getElementsByClassName("js-needs-scaling");
    var resizeAll = function() {
      Array.prototype.forEach.call(elems, function(elem) {
        var frames = elem.getElementsByTagName("iframe")
        if (frames.length === 0) {
          return;
        }
        var disclosure = elem.getElementsByClassName("js-disclosure");
        if (disclosure.length > 0) {
          disclosure[0].style.display = "";
        } else {
          disclosure[0].style.display = "none";
        }
        if (frames[0].clientWidth <= elem.parentElement.clientWidth) {
          elem.style.transform = "";
          elem.classList.add("text-center");
          return;
        }
        elem.classList.remove("text-center");
        elem.style.transform = "scale(" + elem.clientWidth / frames[0].width + ")";
      });
    }
    var periodicResize = function() {
      resizeAll();
      setTimeout(periodicResize, 100);
    }
    setTimeout(periodicResize, 100);
  })();
  </script>
<script id="dsq-count-scr" src="https://realpython.disqus.com/count.js" async=""></script>
<script>
      var disqus_config = function () {
        this.page.url = 'https://realpython.com/python-defaultdict/';
        this.page.identifier = 'https://realpython.com/python-defaultdict/';
        this.callbacks.onReady = [function() {
          if (window.onDisqusReady) {
            window.onDisqusReady();
          }
        }];
      };
      var disqus_script_url = 'https://realpython.disqus.com/embed.js';
    </script>
<script src="./深入探讨defaultdict和dict的区别_files/lazydisqus.3a3e39583b32.js.下载" defer=""></script>
<script src="./深入探讨defaultdict和dict的区别_files/OneSignalSDK.js.下载" async=""></script>
<script>
    var OneSignal = window.OneSignal || [];
    OneSignal.push(function() {
      OneSignal.init({
        appId: "c0081e20-a523-42bb-b0ac-04c5a9e8bf40"
      });
    });
  </script>
<script src="./深入探讨defaultdict和dict的区别_files/articlevc.11f8c3a3f08d.js.下载" defer=""></script>
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Using the Python defaultdict Type for Handling Missing Keys",
    
    "image": {
      "@type": "ImageObject",
      "url": "https://files.realpython.com/media/The-Python-defaultdict-Type_Watermarked.f6e14d903857.jpg",
      "width": 1920,
      "height": 1080
    },
    
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://realpython.com/python-defaultdict/"
    },
    "datePublished": "2020-03-11T14:00:00+00:00",
    "dateModified": "2020-02-27T00:37:58.108930+00:00",
     "publisher": {
      "@type": "Organization",
      "name": "Real Python",
      "logo": {
        "@type": "ImageObject",
        "url": "https://realpython.com/static/real-python-logo-square-tiny.b2452b6d3823.png",
        "width": 60,
        "height": 60
      }
    },
    "author": {
      "@type": "Organization",
      "name": "Real Python",
      "url": "https://realpython.com",
      "logo": "https://realpython.com/static/real-python-logo-square.146e987bf77c.png"
    },
    "description": "In this step-by-step tutorial, you&#39;ll learn how the Python defaultdict type works and how to use it for handling missing keys when you&#39;re working with dictionaries. You&#39;ll also learn how to use a defaultdict to solve problems like grouping or counting the items in a sequence or collection."
  }
  </script>
<script>
  var _dcq = _dcq || [];
  var _dcs = _dcs || {};
  _dcs.account = '6214500';

  (function() {
    var dc = document.createElement('script');
    dc.type = 'text/javascript'; dc.async = true;
    dc.src = '//tag.getdrip.com/6214500.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(dc, s);
  })();
</script>
<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '2220911568135371');
  fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=2220911568135371&ev=PageView&noscript=1"
/></noscript>


<div class="drip-tab-container">
  <div id="drip-106703" class="drip-tab bottom right side-image image-left">
    <div id="drip-header-106703" class="drip-header">
      <a href="https://realpython.com/python-defaultdict/#" id="drip-toggle-106703" class="drip-toggle">
        <h2 id="drip-teaser-106703">Improve Your Python</h2>
        <span id="drip-tab-up-106703" class="drip-arrow up">
          <svg width="12px" height="8px" viewBox="1362 659 12 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <polygon id="right_angle" stroke="none" fill="#FFFFFF" fill-rule="evenodd" transform="translate(1368.000000, 662.703125) rotate(-90.000000) translate(-1368.000000, -662.703125) " points="1364.29688 667.296875 1368.89062 662.703125 1364.29688 658.109375 1365.70312 656.703125 1371.70312 662.703125 1365.70312 668.703125"></polygon>
          </svg>
        </span>
        <span id="drip-tab-down-106703" class="drip-arrow down" style="display: none"></span>
      </a>
    </div>
    <div id="drip-content-106703" class="drip-content drip-clearfix" style="height: auto; bottom: -542px;">
      <a id="drip-close-106703" class="drip-close">
        <svg width="12px" height="12px" viewBox="630 19 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <polygon id="x" stroke="none" fill="#A8ACB9" fill-rule="evenodd" points="641.376687 30.1740899 636.49366 24.436669 641.095466 19 639.510399 19 635.701126 23.6038176 631.866288 19 630.281221 19 634.883028 24.436669 630 30.1740899 631.585067 30.1740899 635.701126 25.2463857 639.791621 30.1740899"></polygon>
        </svg>
      </a>

      <div id="drip-form-panel-106703" class="drip-panel drip-clearfix" style="display: block;">
        
          <div class="drip-form-aside">
            <span class="drip-image-helper"></span>
            <img src="./深入探讨defaultdict和dict的区别_files/side_ded3082af3893736e51b0d2da53701b6.png" class="drip-image">
          </div>
        

        <div class="drip-form-main">
          <h3 id="drip-content-header-106703">Improve Your Python</h3>
          
            <div id="drip-scroll-106703" class="drip-scroll">
          
            <div class="drip-description">...with a fresh 🐍&nbsp;<strong>Python&nbsp;Trick</strong>&nbsp;💌 &nbsp;<br>
code snippet every couple of days:</div>
            <form id="drip-form-106703">
              <div style="display: none">
                <input type="hidden" name="form_id" value="106703">
              </div>
              <dl class="no-labels">
                
                  
                    <dt>Email Address</dt>
                    <dd>
                      
                        <input type="email" name="fields[email]" value="" placeholder="Email Address" class="drip-text-field">
                        <div id="drip-errors-for-email-106703" class="drip-errors"></div>
                      
                    </dd>
                  
                
                  
                    <dt></dt>
                    <dd>
                      
                        <div class="zenput zenput--checkbox hidden" data-container="eu-checkbox">
                          <input type="hidden" name="fields[eu_consent]" id="drip-field-eu_consent-106703-denied" value="denied" disabled="disabled">
                          <input type="checkbox" name="fields[eu_consent]" id="drip-field-eu_consent-106703" value="granted" disabled="disabled">
                          <label class="zenput__checkbox-label" for="drip-field-eu_consent-106703">Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.
                            <div class="zenput__checkbox-label__icon"><svg class="octicon octicon-check" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg></div>
                          </label>
                        </div>
                      
                    </dd>
                  
                
                  
                    <input type="hidden" name="fields[eu_consent_message]" value="Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.">
                  
                
                
                <div style="display: none;" aria-hidden="true">
                  <dt for="website">Website</dt>
                  <dd>
                    <input type="text" id="website" name="website" placeholder="Website" class="drip-text-field" tabindex="-1" autocomplete="false" value="">
                  </dd>
                </div>
              </dl>
              <div class="form-controls">
                <input type="submit" name="submit" value="Send Python Tricks »" id="drip-submit-106703" class="drip-submit-button">
              </div>
            </form>
          </div>
        </div>
      </div>

      <div id="drip-success-panel-106703" class="drip-success drip-panel drip-clearfix" style="display: none">
        <h3>Almost there...</h3>
        <p class="drip-description drip-post-submission">Check your inbox. I'm sending you the first Python Trick right now.</p>
      </div>

      
    </div>
  </div>
</div><div class="drip-lightbox-wrapper">
  <div id="drip-108609" class="drip-lightbox drip-hidden side-image image-right">
    <div id="drip-content-108609" class="drip-content" style="height: auto;">
      <a id="drip-close-108609" class="drip-close">
        <svg width="12px" height="12px" viewBox="630 19 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <polygon id="x" stroke="none" fill="#A8ACB9" fill-rule="evenodd" points="641.376687 30.1740899 636.49366 24.436669 641.095466 19 639.510399 19 635.701126 23.6038176 631.866288 19 630.281221 19 634.883028 24.436669 630 30.1740899 631.585067 30.1740899 635.701126 25.2463857 639.791621 30.1740899"></polygon>
        </svg>
      </a>

      <div id="drip-form-panel-108609" class="drip-panel" style="display: block;">
        
          <div class="drip-form-aside">
            <span class="drip-image-helper"></span>
            <img src="./深入探讨defaultdict和dict的区别_files/side_0743418fd26dda9240db39b8bc3744e1.png" class="drip-image">
          </div>
        

        <div class="drip-form-main">
          <h3 id="drip-content-header-108609">Get the Python Cheat Sheet</h3>
          
            <div id="drip-scroll-108609" class="drip-scroll">
          
            <div class="drip-description">Enter your email address below and we'll send you the Python cheat sheet right away:</div>

            <form id="drip-form-108609">
              <dl class="no-labels">
                
                  
                    
                      <dt>Email Address</dt>
                    
                    <dd>
                      
                        <input type="email" name="fields[email]" value="" placeholder="Email Address" class="drip-text-field">
                        <div id="drip-errors-for-email-108609" class="drip-errors"></div>
                      
                    </dd>
                  
                
                  
                    
                    <dd>
                      
                        <div class="zenput zenput--checkbox hidden" data-container="eu-checkbox">
                          <input type="hidden" name="fields[eu_consent]" id="drip-field-eu_consent-108609-denied" value="denied" disabled="disabled">
                          <input type="checkbox" name="fields[eu_consent]" id="drip-field-eu_consent-108609" value="granted" disabled="disabled">
                          <label class="zenput__checkbox-label" for="drip-field-eu_consent-108609">Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.
                            <div class="zenput__checkbox-label__icon"><svg class="octicon octicon-check" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg></div>
                          </label>
                        </div>
                      
                    </dd>
                  
                
                  
                    <input type="hidden" name="fields[eu_consent_message]" value="Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.">
                  
                
                
                <div style="display: none;" aria-hidden="true">
                  <dt for="website">Website</dt>
                  <dd>
                    <input type="text" id="website" name="website" placeholder="Website" class="drip-text-field" tabindex="-1" autocomplete="false" value="">
                  </dd>
                </div>
              </dl>
              <div class="form-controls">
                <input type="submit" name="submit" value="Send My Python Cheat Sheet »" id="drip-submit-108609" class="drip-submit-button">
              </div>
            </form>
          </div>
        </div>
      </div>

      <div id="drip-success-panel-108609" class="drip-success drip-panel" style="display: none">
        <h3>Almost there...</h3>
        <p class="drip-description drip-post-submission">We emailed you the cheat sheet. Please check your inbox in a few minutes.</p>
      </div>

      
    </div>
  </div>
  <div id="drip-backdrop-108609" class="drip-backdrop drip-fade drip-hidden"></div>
</div><div class="drip-lightbox-wrapper">
  <div id="drip-108599" class="drip-lightbox drip-hidden side-image image-right">
    <div id="drip-content-108599" class="drip-content" style="height: auto;">
      <a id="drip-close-108599" class="drip-close">
        <svg width="12px" height="12px" viewBox="630 19 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <polygon id="x" stroke="none" fill="#A8ACB9" fill-rule="evenodd" points="641.376687 30.1740899 636.49366 24.436669 641.095466 19 639.510399 19 635.701126 23.6038176 631.866288 19 630.281221 19 634.883028 24.436669 630 30.1740899 631.585067 30.1740899 635.701126 25.2463857 639.791621 30.1740899"></polygon>
        </svg>
      </a>

      <div id="drip-form-panel-108599" class="drip-panel" style="display: block;">
        
          <div class="drip-form-aside">
            <span class="drip-image-helper"></span>
            <img src="./深入探讨defaultdict和dict的区别_files/side_c058822f7c534cad01d5dea43398e2fd.png" class="drip-image">
          </div>
        

        <div class="drip-form-main">
          <h3 id="drip-content-header-108599">Get a Sample Chapter From the First Course</h3>
          
            <div id="drip-scroll-108599" class="drip-scroll">
          
            <div class="drip-description">Enter your email address below and we'll send you the sample chapter right away:</div>

            <form id="drip-form-108599">
              <dl class="no-labels">
                
                  
                    
                      <dt>Email Address</dt>
                    
                    <dd>
                      
                        <input type="email" name="fields[email]" value="" placeholder="Email Address" class="drip-text-field">
                        <div id="drip-errors-for-email-108599" class="drip-errors"></div>
                      
                    </dd>
                  
                
                  
                    
                    <dd>
                      
                        <div class="zenput zenput--checkbox hidden" data-container="eu-checkbox">
                          <input type="hidden" name="fields[eu_consent]" id="drip-field-eu_consent-108599-denied" value="denied" disabled="disabled">
                          <input type="checkbox" name="fields[eu_consent]" id="drip-field-eu_consent-108599" value="granted" disabled="disabled">
                          <label class="zenput__checkbox-label" for="drip-field-eu_consent-108599">Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.
                            <div class="zenput__checkbox-label__icon"><svg class="octicon octicon-check" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"></path></svg></div>
                          </label>
                        </div>
                      
                    </dd>
                  
                
                  
                    <input type="hidden" name="fields[eu_consent_message]" value="Receive the Real Python newsletter and get notified about new tutorials we publish on the site, as well as occasional special offers.">
                  
                
                
                <div style="display: none;" aria-hidden="true">
                  <dt for="website">Website</dt>
                  <dd>
                    <input type="text" id="website" name="website" placeholder="Website" class="drip-text-field" tabindex="-1" autocomplete="false" value="">
                  </dd>
                </div>
              </dl>
              <div class="form-controls">
                <input type="submit" name="submit" value="Get Sample Chapter »" id="drip-submit-108599" class="drip-submit-button">
              </div>
            </form>
          </div>
        </div>
      </div>

      <div id="drip-success-panel-108599" class="drip-success drip-panel" style="display: none">
        <h3>Almost there...</h3>
        <p class="drip-description drip-post-submission">We emailed you the sample chapter. Please check your inbox in a few minutes.</p>
      </div>

      
    </div>
  </div>
  <div id="drip-backdrop-108599" class="drip-backdrop drip-fade drip-hidden"></div>
</div><iframe src="./深入探讨defaultdict和dict的区别_files/webPushAnalytics.html" style="display: none;"></iframe><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./深入探讨defaultdict和dict的区别_files/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div><div id="onesignal-bell-container" class="onesignal-bell-container onesignal-reset onesignal-bell-container-bottom-left"><div id="onesignal-bell-launcher" class="onesignal-bell-launcher onesignal-bell-launcher-md onesignal-bell-launcher-bottom-left onesignal-bell-launcher-theme-default onesignal-bell-launcher-active" style="bottom: 15px; left: 15px;"><div class="onesignal-bell-launcher-button"><svg class="onesignal-bell-svg" xmlns="http://www.w3.org/2000/svg" width="99.7" height="99.7" viewBox="0 0 99.7 99.7" style="filter: drop-shadow(0 2px 4px rgba(34,36,38,0.35));; -webkit-filter: drop-shadow(0 2px 4px rgba(34,36,38,0.35));;"><circle class="background" cx="49.9" cy="49.9" r="49.9" style="fill: rgb(208, 2, 27);"></circle><path class="foreground" d="M50.1 66.2H27.7s-2-.2-2-2.1c0-1.9 1.7-2 1.7-2s6.7-3.2 6.7-5.5S33 52.7 33 43.3s6-16.6 13.2-16.6c0 0 1-2.4 3.9-2.4 2.8 0 3.8 2.4 3.8 2.4 7.2 0 13.2 7.2 13.2 16.6s-1 11-1 13.3c0 2.3 6.7 5.5 6.7 5.5s1.7.1 1.7 2c0 1.8-2.1 2.1-2.1 2.1H50.1zm-7.2 2.3h14.5s-1 6.3-7.2 6.3-7.3-6.3-7.3-6.3z" style="fill: rgb(255, 255, 255);"></path><ellipse class="stroke" cx="49.9" cy="49.9" rx="37.4" ry="36.9" style="stroke: rgb(255, 255, 255);"></ellipse></svg></div><div class="onesignal-bell-launcher-badge" style="filter: drop-shadow(0 2px 4px rgba(34,36,38,0));; -webkit-filter: drop-shadow(0 2px 4px rgba(34,36,38,0));;"></div><div class="onesignal-bell-launcher-message"><div class="onesignal-bell-launcher-message-body"></div></div><div class="onesignal-bell-launcher-dialog" style="filter: drop-shadow(0px 2px 2px rgba(34,36,38,.15));; -webkit-filter: drop-shadow(0px 2px 2px rgba(34,36,38,.15));;"><div class="onesignal-bell-launcher-dialog-body"></div></div></div></div><div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><iframe id="google_osd_static_frame_9793065439702" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./深入探讨defaultdict和dict的区别_files/saved_resource(4).html"></iframe></body><iframe sandbox="allow-scripts allow-same-origin" id="351a9c9c9a3e0ff" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="./深入探讨defaultdict和dict的区别_files/cs(1).html">
    </iframe></html>