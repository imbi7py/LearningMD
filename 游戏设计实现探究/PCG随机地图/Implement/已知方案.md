### 随机放置房间



![dungeon_basic](https://slsdo.github.io/procedural-dungeon/img/dungeon_basic.png)

特点：形状方正

基本步骤描述：

- 配置地图信息：房间个数，房间长宽范围，地块表现标志等
- 在地图范围的随机方位生成一个随机大小的房间，以及在房间墙壁的随机位置生成开口
- 检查房间放置位置是否合理，不合理就删除重新生成
- 房间都创建好之后，在房间开口处创建梯子，然后使用A*寻径算法算出两个开口处的最短路径，并打通连接各个房间
- （选做）如果有开口没有可连接的对象随机连到一个房间的墙壁上，墙壁上开一个新口

### 细胞自动机

![dungeon_ca](https://slsdo.github.io/procedural-dungeon/img/dungeon_ca.png)

特点：形状自然随机

基本步骤描述：

- 随机生成一份地图，通常小于40%的几率生成墙，其余生成地板（概率自定义）。得到一份二维数组。
- 遍历二维数组：如果元素周围一圈格子大于等于5个墙就这个元素就变成墙
- 如果元素周围两圈格子的墙少于等于2个，那这个元素就变成墙
- 重复循环一定次数，得到最终地图

### 二叉空间分割树

![dungeon_bsp](https://slsdo.github.io/procedural-dungeon/img/dungeon_bsp.png)

能够解决第一种方案房间摆放重叠冲突问题。

基本步骤描述：

- 先准备好一定尺寸的2维数组表示地牢范围
- 选择一个随机方向（上或下）和坐标（x表示纵y表示横）
- 使用第2步的参数将地牢分割为两部分
- 随机选择一个部分，并重复执行第二步n次
- 在n次循环后，将不同尺寸的房间放置在各区域中
- 连接各个房间

### 逐步建造

```
             #
             #   ###
        #### #  #####
        ###C # #######
        #### #D#######
        #### # #######
#####     D  #  #####
#####D########   ###
#####
```

生成步骤：D-D-C-D

- 初始化一定尺寸的地图
- 在城中间生成第一个房间
- 选择房间边缘的任一墙变成门
- 向房间门外扩张，并且生成另一个可放置下的任意房间
- 循环上两，步直到放不下新房间



总结：

这几种地牢风格的地图PCG方案较为传统，需要个性一些的话要修改一下来满足自己的要求。