1. 图形渲染管线的作用是什么？

   OpenGl中任何事物都处于3D空间中，3D坐标转为2D坐标的处理过程是由OpenGL的图形渲染管线管理的。图形渲染管线可以被划分为两个主要部分：第一部分把你的3D坐标转换为2D坐标，第二部分是把2D坐标转变为实际的有颜色的像素。

2. 渲染管线的不同阶段？

   ![](pipeline.png)

   注：蓝色部分代表开发者可以自定义
   
   - 顶点着色器：输入（着色器程序、顶点数据、常量、采样器），输出（变换后的位置和颜色）。
   - 图元装配：将上一阶段的顶点组合成图元（三角形、直线、精灵等几何对象），对图元进行**裁剪**（不在视锥体范围）、**淘汰**（指定）。
   - 几何着色器：将上一阶段的图元通过产生新顶点构造出新图元来生成其他形状。
   - 光栅化阶段：将图元映射为屏幕像素，生成可供片段着色器使用的片段。对超出视口范围的像素进行**裁切**
   - 片段着色器：计算一个像素的最终颜色，产生OpenGL高级效果的地方。
   - 测试与混合：比对深度值(Depth)、模板值(Stencil)来判断像素在其他物体的前面还是后面，一次决定是否丢弃像素。此外，还会检查透明度（Alpha），并对物体进行混合（Blend）操作。

3.如何区分2D坐标和像素？

​	2D坐标精确表示一个点在2D空间中的位置，而2D像素是这个点的近似值，2D像素受到你的屏幕/窗口分辨率的限制。

4.VBO是什么？有什么作用？

​	VBO是Vertex Buffer Object的简称，叫做**顶点缓冲对象**，本质上是个数组。使用VBO，我们可以在绘图开始之前将整个批次的顶点数据复制到缓冲区中，而该缓冲区位于**GPU内存中**。通过VBO管理上述内存可以储存大量顶点数据，然后一次性发大量的顶点数据到GPU。当数据发送至显卡的内存中后，顶点着色器几乎能立即访问顶点，这是个非常快的过程。

5.链接顶点属性的过程是怎样的？

- 通过 **glGenVertexArray** 来实例化VAO，后续的VBO,EBO都将保存在该绑定的VAO中
- 然后通过 **glBindVertexArray** 绑定这个VAO
- 然后会通过**glGenBuffers**，**glBindBuffer**，**glBufferData**来实例化并绑定VBO/EBO对象，再将数据复制到对应缓冲，剩下的就是告诉OpenGL如何解释这些数据了。
- 随后通过**glVetexAttribPointer**来解析每个VBO/EBO的数据
- 最后通过**glEnableVertexAttribArray**来启用这个配置好的顶点属性

6.VAO是什么，作用？

​	VAO（Vertex Array Object）即**顶点数组对象**。为了避免在将顶点属性链接到着色器的过程中，每个VBO都要设置顶点属性指针的情况。VAO可以像VBO一样被绑定，任何随后顶点属性调用都会存储在这个VAO中。当配置顶点属性指针时，我们只需要将那些调用执行一次，之后在绘制物体的时候绑定相应的VAO即可。

​	这使得不同顶点属性和顶点数据之间切换变得更加方便：只需绑定不同的VAO即可；不同的VAO之间也可以使用相同的VBO，换绑VAO后绑定相同VBO即可。

7.VAO储存了什么内容？

- glEnableVertexAttribArray 和 glDisableVertexAttribArray的调用
- 通过glVertexAttribPointer设置顶点属性配置
- 通过glVertexAttribPointer调用与顶点属性关联的顶点缓冲对象

![img](vertex_array_objects.png)

8. EBO（索引缓冲对象）是如何被使用的？

   存在必要性：为了避免重复定义顶点数据，通过索引的方式，让相同数据的不同索引对象公用一个数据。

   使用：在创建EBO后需要将索引数据复制到对应缓冲，然后绘制阶段调用`glDrawElements`替换`glDrawArray`，目的是启用索引去绘制数据。

   ![](vertex_array_objects_ebo.png)

9. glVertexAttribPointer中的规范化标志如何工作？

   用于顶点着色器之前，会把顶点属性保存为单精度浮点数；如果数据类型不是浮点型，会在作用到着色器之前转换为单精度浮点数。

   如果标志为False, 直接转换成单精度浮点数；为真会根据特定的数据类型进行一个范围映射。

   ![](\设置顶点属性的规范化转化.png)

10. 如何指定顶点属性位置？

    顶点属性位置对应的是在顶点着色器代码中的`location = `代码段，

    可以通过`glVertexAttribPointer`在链接顶点属性的同时指定；也可以通过`glBindAttrivLocation`指定。第一种方式会先默认检查调用第二种方式去做绑定。